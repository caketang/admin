(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{128:function(e,t,a){"use strict";a.r(t);var i=a(197),o=a(198),s=a(201),l={data:()=>({LANG:LANG,tableUrl:"",baseUrl:"",columnsUrl:"",nowId:-1,editVisible:{state:!1},formType:"",page:1,formConfig:[{prop:"name",value:"",type:"text",label:"文案名称",rules:[{require:!0}]},{prop:"language_id",value:"",label:"语言",type:"select",propVal:"language_name",list:[],rules:[{require:!0}]},{prop:"sort",value:"",type:"number",label:"排序",rules:[{require:!0,integer:!0}]},{prop:"content",value:"",type:"markdown",label:"文案内容",config:{maximumWords:5e3},rules:[{require:!0}]},{prop:"pf",value:""}],type:"default",formTitel:"",labelWidth:"90px",isEdit:{state:!1},updated:!1,loading:!1,confirmConfig:{state:!1,msg:"",fn:"",obj:null},dialogTableVisible:!1,detailform:{},formLabelWidth:"100px"}),components:{tablegrid:i.a,formEdit:o.a,confirm:s.a},methods:{init(){let e=this;this.tableUrl=URL.api+ROUTES.GET.copywriter.desc,this.baseUrl=URL.api+ROUTES.GET.copywriter.desc,this.columnsUrl="static/json/ADManage/ADHome/columns.json";let t=this.formConfig[1].list;this.$.autoAjax("get",URL.api+ROUTES.GET.langeages,"",{ok:e=>{if(0==e.state&&e.data){let a=e.data;for(let e in a)t.push({label:a[e].name,value:a[e].id.toString()})}},p:()=>{},error:t=>{e.loading=!1,e.$message.error(LANG["未知错误 ，请稍后重试！"]||"未知错误 ，请稍后重试！")}})},doHandle(e){switch(this.nowId=parseInt(e.row.id)||-1,this.formType="",e.fn){case"doApply":this.doApply(e.row);break;case"doEdit":this.doEdit(e.row);break;case"doDetail":this.doDetail(e.row);break;case"doEnable":this.doEnable(e.row);break;case"doDisable":this.doDisable(e.row);break;case"doDelete":this.doDelete(e.row)}},doAdd(){this.formTitel="新增说明方案",this.editVisible.state=!0,this.formType="add"},getForm(e){this.updated=!1;let t=this;this.fullscreenLoading=!0;let a="";e.formObj.type="help",e.formObj.pf="pc","add"==this.formType?(e.formObj.type="help",this.$.autoAjax("put",URL.api+ROUTES.PUT.copywriter.description,e.formObj,{ok:e=>{null!=e.state&&0==e.state?(a=LANG["恭喜您，新增说明方案成功！"]||"恭喜您，新增说明方案成功！",t.updated=!0,t.$message.success(a)):0==e.data&&e.state>3&&(this.fullscreenLoading=!1,a=e.msg,t.$message.error(LANG[a]||a)),this.fullscreenLoading=!1,t.formType=""},p:()=>{},error:e=>{console.log(e)}}).catch(e=>{t.loading=!1})):this.$.autoAjax("put",URL.api+ROUTES.PATCH.copywriter.description+"?id="+this.nowId,e.formObj,{ok:e=>{null!=e.state&&0==e.state?(a=LANG["恭喜您，说明方案修改成功！"]||"恭喜您，说明方案修改成功！",t.updated=!0,t.$message.success(a)):0==e.data&&e.state>3&&(a=e.msg,t.$message.error(LANG[a]||a)),this.fullscreenLoading=!1,t.formType=""},p:()=>{},error:e=>{console.log(e)}}).catch(e=>{t.loading=!1})},doEdit(e){let t=this;this.loading=!0,t.isEdit.state=!1;let a=URL.api+ROUTES.GET.copywriter.desc+"?id="+parseInt(this.nowId);this.$.autoAjax("get",a,"",{ok:e=>{0==e.state&&e.data?(t.isEdit.state=!0,t.formTitel="修改说明文案",FORMVAL(e.data,t.formConfig),t.formType="edit",t.editVisible.state=!0):t.$message.error(LANG["修改说明文案"]||"修改说明文案"),t.loading=!1},p:()=>{},error:e=>{console.log(e)}}).catch(e=>{t.loading=!1})},doDetail(e){let t=this;this.loading=!0;let a=this.detailform,i=URL.api+ROUTES.GET.copywriter.desc+"?id="+parseInt(this.nowId);this.$.autoAjax("get",i,"",{ok:e=>{if(0==e.state&&e.data){let i=e.data;for(let e in i)a[e]=i[e];t.dialogTableVisible=!0}else t.$message.error(LANG["修改说明文案"]||"修改说明文案");t.loading=!1},p:()=>{},error:e=>{console.log(e)}}).catch(e=>{t.loading=!1})},doApply(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定申请"]||"确定申请")+'"'+e.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="apply",this.confirmConfig.obj=e)},doEnable(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定启用"]||"确定启用")+'"'+e.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="enabled",this.confirmConfig.obj=e)},doDisable(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定停用"]||"确定停用")+'"'+e.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="disabled",this.confirmConfig.obj=e)},doDelete(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定删除"]||"确定删除")+'"'+e.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="delete",this.confirmConfig.obj=e)},doConfirm(e){this.loading=!0,this.updated=!1;let t=this;switch(e.fn){case"apply":let a={approve_status:"applying",language_id:parseInt(e.obj.language_id),pf:e.obj.pf};this.loading=!0,this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.description+"?id="+parseInt(this.nowId),a,{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，说明方案申请成功"]||"恭喜您，说明方案申请成功"),t.updated=!0):t.$message.error(LANG["说明方案申请失败，请稍候重试！"]||"说明方案申请失败，请稍候重试！"),t.loading=!1},p:()=>{},error:e=>{console.log(e)}}).catch(e=>{t.loading=!1});break;case"enabled":this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.description+"?id="+parseInt(this.nowId),{status:"enabled",language_id:parseInt(e.obj.language_id),pf:e.obj.pf},{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，说明方案启用成功！"]||"恭喜您，说明方案启用成功！"),t.updated=!0):t.$message.error(LANG["说明方案启用失败，请稍候重试！"]||"说明方案启用失败，请稍候重试！")},p:()=>{},error:e=>{console.log(e)}}),t.loading=!1;break;case"disabled":this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.description+"?id="+parseInt(this.nowId),{status:"disabled",language_id:parseInt(e.obj.language_id),pf:e.obj.pf},{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，说明方案停用成功！"]||"恭喜您，说明方案停用成功！"),t.updated=!0):t.$message.error(LANG["说明方案停用失败，请稍候重试！"]||"说明方案停用失败，请稍候重试！")},p:()=>{},error:e=>{console.log(e)}}),t.loading=!1;break;case"delete":this.$.autoAjax("delete",URL.api+ROUTES.DELETE.copywriter.desc+"?id="+parseInt(this.nowId),"",{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，说明方案删除成功！"]||"恭喜您，说明方案删除成功！"),t.updated=!0):t.$message.error(LANG["说明方案删除失败，请稍候重试！"]||"说明方案删除失败，请稍候重试！")},p:()=>{},error:e=>{console.log(e)}}),t.loading=!1}}},created(){this.init()}},r=a(24);var d=function(e){a(415)},n=Object(r.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"clearfix",attrs:{id:"results"}},[a("el-col",{staticClass:"pb",staticStyle:{"text-align":"right"},attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"small"},domProps:{textContent:e._s(e.LANG["新增文案管理"]||"新增文案管理")},on:{click:e.doAdd}})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("formEdit",{attrs:{formTitel:e.formTitel,formVisible:e.editVisible,formConfig:e.formConfig,type:e.type,labelWidth:e.labelWidth,isEdit:e.isEdit,formType:e.formType},on:{"get-form":e.getForm}})],1),e._v(" "),a("el-col",[a("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableUrl:e.tableUrl,tableIndex:!1,tableCheck:!1,showRefresh:!0,updated:e.updated},on:{"do-handle":e.doHandle}})],1),e._v(" "),a("el-col",[a("confirm",{attrs:{confirmConfig:e.confirmConfig},on:{"do-confirm":e.doConfirm}})],1),e._v(" "),a("el-col",[a("el-dialog",{staticClass:"detail",attrs:{title:e.LANG["说明文字详情"]||"说明文字详情",size:"tiny"},model:{value:e.dialogTableVisible,callback:function(t){e.dialogTableVisible=t},expression:"dialogTableVisible"}},[a("el-form",{attrs:{model:e.detailform}},[a("el-form-item",{attrs:{label:e.LANG["文案名称"]||"文案名称","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.detailform.name))])]),e._v(" "),a("el-form-item",{attrs:{label:e.LANG["语言"]||"语言","label-width":e.formLabelWidth}},[a("p",{staticStyle:{width:"90%"}},[e._v(e._s(e.detailform.language_name))])]),e._v(" "),a("el-form-item",{attrs:{label:e.LANG["当前排序"]||"当前排序","label-width":e.formLabelWidth}},[a("p",{staticStyle:{width:"90%"}},[e._v(e._s(e.detailform.sort))])]),e._v(" "),a("el-form-item",{attrs:{label:e.LANG["文案内容"]||"文案内容","label-width":e.formLabelWidth}},[a("div",{staticClass:"mark_waip pre-spe",domProps:{innerHTML:e._s(e.detailform.content)}})]),e._v(" "),a("el-form-item",{attrs:{label:e.LANG["生成时间"]||"生成时间","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.detailform.created))])])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("关 闭")])],1)],1)],1)],1)},[],!1,d,null,null);t.default=n.exports},415:function(e,t,a){}}]);