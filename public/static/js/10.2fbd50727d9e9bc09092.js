(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{473:function(e,t,s){},474:function(e,t,s){},475:function(e,t,s){},476:function(e,t,s){},477:function(e,t,s){},478:function(e,t,s){},479:function(e,t,s){},480:function(e,t,s){},98:function(e,t,s){"use strict";s.r(t);var a=s(197),i={data:()=>({LANG:LANG,stat:{deposit_times:0,deposit_money:0,withdraw_times:0,withdraw_money:0,order_times:0,order_money:0,send_prize:0,rebet_money:0,coupon_money:0,lose_earn:0},loading:!1}),props:{id:Number},components:{},methods:{init(){this.loading=!0;let e=this.stat;this.$.autoAjax("get",URL.api+ROUTES.GET.user.info.$(parseInt(this.id))+"?type=stat","",{ok:t=>{if(0==t.state&&t.data){let s=t.data;for(let t in s)e[t]=s[t]}this.loading=!1},p:()=>{},error:e=>{console.log(e)}})},refreshModel(){this.init(),this.$message.success(LANG["刷新成功"]||"刷新成功")}},computed:{},mounted(){},created(){this.init()}},r=s(24);var l=function(e){s(475)},o=Object(r.a)(i,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"clearfix",attrs:{id:"statisticalInformation"}},[s("div",{staticClass:"clearfix",staticStyle:{margin:"0 auto",width:"604px"}},[s("el-col",[s("div",{staticClass:"title"},[e._v(e._s(e.LANG["统计信息"]||"统计信息"))]),e._v(" "),s("el-button",{staticClass:"refresh",attrs:{size:"small",type:"primary"},on:{click:e.refreshModel}},[e._v(e._s(e.LANG["刷 新"]||"刷 新"))])],1),e._v(" "),s("el-col",{staticClass:"border1"},[s("el-form",{attrs:{"label-width":"120px"}},[s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["入款次数累计"]||"入款次数累计"}},[s("span",[e._v(e._s(e.stat.deposit_times))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["入款总额累计"]||"入款总额累计"}},[s("span",[e._v(e._s(parseInt(e.stat.deposit_money)/100))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["出款次数累计"]||"出款次数累计"}},[s("span",[e._v(e._s(e.stat.withdraw_times))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["出款总额累计"]||"出款总额累计"}},[s("span",[e._v(e._s(parseInt(e.stat.withdraw_money)/100))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["注单总数"]||"注单总数"}},[s("span",[e._v(e._s(e.stat.order_times))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["注单总金额"]||"注单总金额"}},[s("span",[e._v(e._s(parseInt(e.stat.order_money)/100))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["返水总金额"]||"返水总金额"}},[s("span",[e._v(e._s(parseInt(e.stat.rebet_money)/100))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["优惠活动总金额"]||"优惠活动总金额"}},[s("span",[e._v(e._s(parseInt(e.stat.coupon_money)/100))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:24}},[s("el-form-item",{attrs:{label:e.LANG["会员总额盈亏"]||"会员总额盈亏"}},[s("span",[e._v(e._s(parseInt(e.stat.lose_earn)/100))])])],1)],1)],1)],1)])},[],!1,l,"data-v-4e1e4b92",null).exports,n=(s(13),{data(){var e=(e,t,s)=>{t&&!/[a-z\d#@!~%^&*]{4,16}/g.test(t)?s(new Error(LANG["请输入数字或字母或特殊字符!"]||"请输入数字或字母或特殊字符")):t&&/\s/.test(t)?s(new Error(LANG["请输入数字或字母或特殊字符，不能输入空格!"]||"请输入数字或字母或特殊字符，不能输入空格")):s()};return{LANG:LANG,baseFrom:{},baseFromSafe:{},baseRules:{email:[{validator:(e,t,s)=>{t&&!/[a-zA-Z0-9\\*]{1,15}@[a-zA-Z0-9]{1,8}\.[a-zA-Z0-9]{1,5}/.test(t)?s(new Error(LANG["请输入正确的邮箱格式!"]||"请输入正确的邮箱格式")):t&&/\s/.test(t)?s(new Error(LANG["请输入有效邮箱，不能输入空格!"]||"请输入有效邮箱，不能输入空格")):s()},trigger:"blur,change"}],truename:[{validator:(e,t,s)=>{t&&!/^[\u4E00-\u9FA5\uf900-\ufa2d·s]{2,14}$/.test(t)?s(new Error(LANG["请输入中文汉字,且长度2到14位!"]||"请输入中文汉字，且长度2到14位！")):s()},trigger:"blur,change"}],mobile:[{validator:(e,t,s)=>{t&&!/^[0-9]\d{0,14}$/.test(t)?s(new Error(LANG["请输入合法的手机号码"]||"请输入合法的手机号码")):t&&/\s/.test(t)?s(new Error(LANG["请输入合法的手机号码，不能输入空格!"]||"请输入合法的手机号码，不能输入空格")):s()},trigger:"blur,change"}],qq:[{validator:(e,t,s)=>{t&&!/^\d{4,16}$/g.test(t)?s(new Error(LANG["请输入合法的QQ号码，只能输入数字!"]||"请输入合法的QQ号码，只能输入数字")):t&&/\s/.test(t)?s(new Error(LANG["请输入合法的QQ号码，不能输入空格!"]||"请输入合法的QQ号码，不能输入空格")):s()},trigger:"blur,change"}],skype:[{validator:e,trigger:"blur,change"}],weixin:[{validator:e,trigger:"blur,change"}],postcode:[{validator:(e,t,s)=>{t&&!/^[0-9]*$/.test(t)?s(new Error(LANG["请输入正确的邮编号码，只能输入数字!"]||"请输入正确的邮编号码，只能输入数字")):t&&/\s/.test(t)?s(new Error(LANG["请输入正确的邮编号码，不能输入空格!"]||"请输入正确的邮编号码，不能输入空格")):s()},trigger:"blur,change"}]},tagsVisible:!1,userTagsList:[],MemberLevelList:[],tagsForm:{id:-1,formUsername:"",userTags:""},tagsRules:{userTags:[{required:!0,message:LANG["请选择用户标签"]||"请选择用户标签",trigger:"change"}]},passTitle:"",passSelect:"",passVisible:!1,passForm:{id:-1,password:"",password1:"",displayPass:null},passRules:{password:[{required:!0,message:LANG["请输入确认密码"]||"请输入确认密码",trigger:"blur"},{validator:(e,t,s)=>{/^[0-9]{6}$/g.test(t)||this.currentPasswordStatus?s():s(new Error(LANG["提款密码应为六位数字组成!"]||"提款密码应为六位数字组成"))},trigger:"blur"}],password1:[{required:!0,message:LANG["请输入确认密码"]||"请输入确认密码",trigger:"blur"},{validator:(e,t,s)=>{t!==this.passForm.password?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]},currentPasswordStatus:!0,loading:!1,questionList:[],permissions:{true_name:!1,qq:!1,weixin:!1,email:!1,mobile:!1,address:!1,birth:!1,answer:!1,gender:!1,idcard:!1,skype:!1,nationality:!1,language:!1,question_id:!1,comment:!1}}},props:{id:Number},components:{},methods:{init(){this.loading=!0,this.$.autoAjax("get",URL.api+ROUTES.GET.user.newInfo+"?id="+parseInt(this.id)+"&type=base","",{ok:e=>{0==e.state&&e.data&&(this.baseFrom=e.data,this.tagsForm.formUsername=e.data.username,this.baseFromSafe=e.data.safe),this.loading=!1},p:()=>{},error:e=>{console.log(e)}})},getSelectList(){let e=this.userTagsList;this.$.autoAjax("get",URL.api+ROUTES.GET.user.labels,"",{ok:t=>{if(0==t.state){let s=t.data;for(let t in s)e.push({label:s[t].title,value:s[t].id})}},p:()=>{},error:e=>{console.log(e)}})},getQuestionList(){this.questionList=[],this.$.autoAjax("get",URL.api+"/user/info/question","",{ok:e=>{if(0==e.state){let t=e.data;for(let e in t)this.questionList.push({label:t[e].question,value:t[e].id})}},p:()=>{},error:e=>{console.log(e)}})},addTags(){this.tagsVisible=!0},saveTags(){this.$.autoAjax("put",URL.api+ROUTES.PUT.user.label.bind+"?id="+parseInt(this.id,10),{tag:parseInt(this.tagsForm.userTags,10)},{ok:e=>{0==e.state&&e.data?(this.$message.success(this.LANG["恭喜您，会员打标签成功！"]||"恭喜您，会员打标签成功！"),this.tagsVisible=!1,this.init()):4001===e.state?this.$message.error(LANG["请至少选择一个标签！"]||"请至少选择一个标签！"):this.$message.error(this.LANG["会员打标签失败，请稍后重试！"]||"会员打标签失败，请稍后重试！")},p:()=>{},error:e=>{console.log(e)}})},resetLoginPass(){this.passVisible=!0,this.passTitle=this.LANG["重置登录密码"]||"重置登录密码",this.passSelect="1",this.currentPasswordStatus=!0},resetWithdrawPass(){this.passVisible=!0,this.passSelect="2",this.passTitle=this.LANG["重置取款密码"]||"重置取款密码",this.currentPasswordStatus=!1},adjustmentGrade(){let e=this.MemberLevelList,t=this.baseFrom.user_level;for(let s in e)e[s].label==t&&(this.adjustmentForm.MemberLevel=e[s].value);this.adjustmentVisible=!0},savePass(){let e=this.passForm.password;this.$refs.passForm.validate(t=>{t&&("1"==this.passSelect&&this.$.autoAjax("patch",URL.api+ROUTES.PATCH.user.info.loginword+"?id="+parseInt(this.id),{"pw-new":this.passForm.password},{ok:t=>{0==t.state&&t.data?(this.$message.success(this.LANG["恭喜您，登录密码修改成功！"]||"恭喜您，登录密码修改成功！"),this.tagsVisible=!1,this.baseFrom.login_pwd=e):this.$message.error(this.LANG["登录密码修改失败，请稍后重试！"]||"登录密码修改失败，请稍后重试！")},p:()=>{},error:e=>{console.log(e)}}),"2"==this.passSelect&&(console.log("hahahha---"),this.$.autoAjax("patch",URL.api+ROUTES.PATCH.user.info.password+"?id="+parseInt(this.id),{"pw-new":this.passForm.password},{ok:t=>{0==t.state&&t.data?(this.$message.success(this.LANG["恭喜您，提款密码修改成功！"]||"恭喜您，提款密码修改成功！"),this.baseFrom.withdraw_pwd=e):this.$message.error(this.LANG["提款密码修改失败，请稍后重试！"]||"提款密码修改失败，请稍后重试！")},p:()=>{},error:e=>{console.log(e)}})),this.resetPassForm())})},resetPassForm(){this.$refs.passForm.resetFields(),this.passVisible=!1},saveModel(){let e={comment:this.baseFrom.comment};"true"===sessionStorage.true_name&&(e.name=this.baseFrom.truename),"true"===sessionStorage.nationality&&(e.postcode=this.baseFrom.postcode),"true"===sessionStorage.address&&(e.address=this.baseFrom.address),"true"===sessionStorage.mobile&&(e.mobile=this.baseFrom.mobile),"true"===sessionStorage.qq&&(e.qq=this.baseFrom.qq),"true"===sessionStorage.weixin&&(e.weixin=this.baseFrom.weixin),"true"===sessionStorage.idcard&&(e.idcard=this.baseFrom.idcard),"true"===sessionStorage.answer&&(e.qid=this.baseFrom.question_id,e.answer=this.baseFrom.answer),"true"===sessionStorage.skype&&(e.skype=this.baseFrom.skype),"true"===sessionStorage.email&&(e.email=this.baseFrom.email),this.$refs.baseFrom.validate(t=>{t&&(this.loading=!0,this.$.autoAjax("patch",URL.api+ROUTES.PATCH.user.info.base+"?id="+parseInt(this.id),e,{ok:e=>{0==e.state&&e.data?this.$message.success(this.LANG["恭喜您，会员资料修改成功！"]||"恭喜您，会员资料修改成功！"):405==e.state?this.$message.error(this.LANG["会员资料修改失败,权限不足"]||"会员资料修改失败,权限不足"):this.$message.error(this.LANG[e.msg]||e.msg),this.init(),this.loading=!1},p:()=>{},error:e=>{console.log(e)}}))})},validatorPhon(e,t,s){/^1[3|4|5|7|8][0-9]\d{4,8}$/.test(t)?s():s(new Error(this.LANG["请输入合法的手机号码"]||"请输入合法的手机号码"))}},computed:{},mounted(){},created(){this.init(),this.getSelectList(),this.getQuestionList(),"false"===sessionStorage.true_name&&(this.permissions.true_name=!0),"false"===sessionStorage.idcard&&(this.permissions.idcard=!0),"false"===sessionStorage.mobile&&(this.permissions.mobile=!0),"false"===sessionStorage.qq&&(this.permissions.qq=!0),"false"===sessionStorage.weixin&&(this.permissions.weixin=!0),"false"===sessionStorage.answer&&(this.permissions.answer=!0),"false"===sessionStorage.skype&&(this.permissions.skype=!0),"false"===sessionStorage.address&&(this.permissions.address=!0),"false"===sessionStorage.email&&(this.permissions.email=!0),"false"===sessionStorage.nationality&&(this.permissions.nationality=!0)}});var m=function(e){s(476)},d=Object(r.a)(n,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"basicInformation"}},[s("div",{staticClass:"clearfix",staticStyle:{margin:"0 auto",width:"933px"}},[s("el-col",[s("div",{staticClass:"title"},[e._v(e._s(e.LANG["基本资料"]||"基本资料"))])]),e._v(" "),s("el-col",{staticClass:"border1"},[s("el-form",{ref:"baseFrom",attrs:{model:e.baseFrom,rules:e.baseRules,"label-width":"100px"}},[s("el-row",[s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["用户名"]||"用户名"}},[s("span",[e._v(e._s(e.baseFrom.username))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["ID/昵称"]||"ID/昵称"}},[s("span",{staticClass:"mr20"},[e._v(e._s(e.baseFrom.id))]),e._v("|"),s("span",{staticClass:"ml20"},[e._v(e._s(e.baseFrom.nickname))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["标签"]||"标签"}},[s("span",[e._v(e._s(e.baseFrom.tags))]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.addTags}},[e._v(e._s(e.LANG["打标签"]||"打标签"))])],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["真实姓名"]||"真实姓名",prop:e.permissions.true_name?"":"truename"}},[s("el-input",{attrs:{disabled:e.permissions.true_name},model:{value:e.baseFrom.truename,callback:function(t){e.$set(e.baseFrom,"truename",t)},expression:"baseFrom['truename']"}})],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["登录密码"]||"登录密码"}},[s("span",[e._v("****")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.resetLoginPass}},[e._v(e._s(e.LANG["重置"]||"重置"))])],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["取款密码"]||"取款密码"}},[s("span",[e._v("****")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.resetWithdrawPass}},[e._v(e._s(e.LANG["重置"]||"重置")+"\n                            ")])],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["用户类型"]||"用户类型"}},[s("span",[e._v(e._s(e.baseFrom.user_type))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["会员等级"]||"会员等级"}},[s("span",[e._v(e._s(e.baseFrom.level))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["注册时间"]||"注册时间"}},[s("span",[e._v(e._s(e.baseFrom.created))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["最后登录时间"]||"最后登录时间"}},[s("span",[e._v(e._s(e.baseFrom.last_login))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["注册IP"]||"注册IP"}},[s("span",[e._v(e._s(e.baseFrom.ip))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["最后登录IP"]||"最后登录IP"}},[s("span",[e._v(e._s(e.baseFrom.last_ip))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["注册来源"]||"注册来源"}},[s("span",[e._v(e._s(e._f("filterChnnel")(e.baseFrom.channel)))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["邮箱"]||"邮箱",prop:e.permissions.email?"":"email"}},[s("el-input",{attrs:{disabled:e.permissions.email},model:{value:e.baseFrom.email,callback:function(t){e.$set(e.baseFrom,"email",t)},expression:"baseFrom['email']"}}),e._v(" "),s("el-tag",{attrs:{type:"primary"}},[e._v(e._s("1"==e.baseFromSafe.email?"已验证":"未验证"))])],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["身份证号码"]||"身份证号码",prop:e.permissions.idcard?"":"idcard"}},[s("el-input",{attrs:{disabled:e.permissions.idcard},model:{value:e.baseFrom.idcard,callback:function(t){e.$set(e.baseFrom,"idcard",t)},expression:"baseFrom['idcard']"}})],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["手机"]||"手机",prop:e.permissions.mobile?"":"mobile"}},[s("el-input",{attrs:{disabled:e.permissions.mobile},model:{value:e.baseFrom.mobile,callback:function(t){e.$set(e.baseFrom,"mobile",t)},expression:"baseFrom['mobile']"}}),e._v(" "),s("el-tag",{attrs:{type:"primary"}},[e._v(e._s("1"==e.baseFromSafe.mobile?"已验证":"未验证"))])],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG.QQ||"QQ",prop:e.permissions.qq?"":"qq"}},[s("el-input",{attrs:{disabled:e.permissions.qq,type:"number"},model:{value:e.baseFrom.qq,callback:function(t){e.$set(e.baseFrom,"qq",t)},expression:"baseFrom['qq']"}})],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["微信"]||"微信",prop:e.permissions.weixin?"":"weixin"}},[s("el-input",{attrs:{disabled:e.permissions.weixin},model:{value:e.baseFrom.weixin,callback:function(t){e.$set(e.baseFrom,"weixin",t)},expression:"baseFrom['weixin']"}})],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["安全问题"]||"安全问题",prop:e.permissions.answer?"":"question_id"}},[s("el-select",{attrs:{placeholder:"请选择",disabled:e.permissions.answer},model:{value:e.baseFrom.question_id,callback:function(t){e.$set(e.baseFrom,"question_id",t)},expression:"baseFrom['question_id']"}},e._l(e.questionList,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["安全答案"]||"安全答案",prop:e.permissions.answer?"":"answer"}},[s("el-input",{attrs:{disabled:e.permissions.answer},model:{value:e.baseFrom.answer,callback:function(t){e.$set(e.baseFrom,"answer",t)},expression:"baseFrom['answer']"}})],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["国家"]||"国家"}},[s("span",[e._v(e._s(e.baseFrom.country))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["省市"]||"省市"}},[s("span",[e._v(e._s(e.baseFrom.province+" "+e.baseFrom.city))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["国籍"]||"国籍"}},[s("span",[e._v(e._s(e.baseFrom.nationality))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["货币"]||"货币"}},[s("span",[e._v(e._s(e.baseFrom.ctype))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["语言"]||"语言"}},[s("span",[e._v(e._s(e.baseFrom.language_name))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["生日"]||"生日"}},[s("span",[e._v(e._s(e.baseFrom.birth))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["性别"]||"性别"}},[s("span",[e._v(e._s(e.baseFrom.sex))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG.Skype||"Skype",prop:e.permissions.skype?"":"skype"}},[s("el-input",{attrs:{disabled:e.permissions.skype},model:{value:e.baseFrom.skype,callback:function(t){e.$set(e.baseFrom,"skype",t)},expression:"baseFrom['skype']"}})],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["地址"]||"地址",prop:e.permissions.address?"":"address"}},[s("el-input",{attrs:{disabled:e.permissions.address},model:{value:e.baseFrom.address,callback:function(t){e.$set(e.baseFrom,"address",t)},expression:"baseFrom['address']"}})],1)],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["邮编"]||"邮编",prop:e.permissions.nationality?"":"postcode"}},[s("el-input",{attrs:{disabled:e.permissions.nationality},model:{value:e.baseFrom.postcode,callback:function(t){e.$set(e.baseFrom,"postcode",t)},expression:"baseFrom['postcode']"}})],1)],1),e._v(" "),s("el-col",{staticClass:"item itemtextarea"},[s("el-form-item",{attrs:{label:e.LANG["备注"]||"备注",prop:e.permissions.comment?"":"comment"}},[s("el-input",{staticStyle:{"margin-left":"0px"},attrs:{type:"textarea"},model:{value:e.baseFrom.comment,callback:function(t){e.$set(e.baseFrom,"comment",t)},expression:"baseFrom['comment']"}})],1)],1)],1)],1),e._v(" "),s("el-col",{staticClass:"tCent mt10 pb",attrs:{span:24}},[s("el-button",{attrs:{type:"primary"},on:{click:e.saveModel}},[e._v(e._s(e.LANG["保存基本资料"]||"保存基本资料"))])],1)],1),e._v(" "),s("el-col",[s("el-dialog",{attrs:{title:e.LANG["打标签"]||"打标签",size:"tiny"},model:{value:e.tagsVisible,callback:function(t){e.tagsVisible=t},expression:"tagsVisible"}},[s("el-form",{ref:"tagsForm",attrs:{model:e.tagsForm,rules:e.tagsRules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:e.LANG["用户名:"]||"用户名:"}},[s("span",[e._v(e._s(e.tagsForm.formUsername))])]),e._v(" "),s("el-form-item",{attrs:{prop:"userTags",label:e.LANG["标签:"]||"标签:"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.tagsForm.userTags,callback:function(t){e.$set(e.tagsForm,"userTags",t)},expression:"tagsForm.userTags"}},e._l(e.userTagsList,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.tagsVisible=!1}}},[e._v(e._s(e.LANG["取消"]||"取消"))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.saveTags}},[e._v(e._s(e.LANG["保存"]||"保存"))])],1)],1)],1),e._v(" "),s("el-col",[s("el-dialog",{attrs:{title:e.passTitle,size:"tiny"},model:{value:e.passVisible,callback:function(t){e.passVisible=t},expression:"passVisible"}},[s("el-form",{ref:"passForm",staticStyle:{height:"130px"},attrs:{model:e.passForm,rules:e.passRules,"label-width":"100px"}},[s("el-form-item",{staticStyle:{height:"60px"},attrs:{label:e.LANG["新密码"]||"新密码",prop:"password"}},[e.passForm.displayPass?e._e():s("el-input",{attrs:{type:"password"},model:{value:e.passForm.password,callback:function(t){e.$set(e.passForm,"password",t)},expression:"passForm.password"}}),e._v(" "),e.passForm.displayPass?s("el-input",{model:{value:e.passForm.password,callback:function(t){e.$set(e.passForm,"password",t)},expression:"passForm.password"}}):e._e()],1),e._v(" "),s("el-form-item",{staticStyle:{height:"50px"},attrs:{prop:"password1",label:e.LANG["确认密码"]||"确认密码"}},[e.passForm.displayPass?e._e():s("el-input",{attrs:{type:"password"},model:{value:e.passForm.password1,callback:function(t){e.$set(e.passForm,"password1",t)},expression:"passForm.password1"}}),e._v(" "),e.passForm.displayPass?s("el-input",{model:{value:e.passForm.password1,callback:function(t){e.$set(e.passForm,"password1",t)},expression:"passForm.password1"}}):e._e()],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.passForm.displayPass,callback:function(t){e.$set(e.passForm,"displayPass",t)},expression:"passForm.displayPass"}},[e._v(e._s(e.LANG["显示密码"]||"显示密码"))])],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.resetPassForm}},[e._v(e._s(e.LANG["取消"]||"取消"))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.savePass}},[e._v(e._s(e.LANG["保存"]||"保存"))])],1)],1)],1)],1)])},[],!1,m,"data-v-78b81b76",null).exports,c={data:()=>({LANG:LANG,accountFrom:{currency:"",currency_name:"",updated:"",freeze_withdraw:"",freeze_append:"",children:[],balance:"",total_balance:"",amount:""},refresh_bool:!1,loading:!1}),props:{id:Number,username:String},components:{},methods:{init(){let e=this.accountFrom,t=this.refresh_bool?URL.api+ROUTES.GET.user.newInfo+"?id="+parseInt(this.id)+"&type=balance&refresh=1":URL.api+ROUTES.GET.user.newInfo+"?id="+parseInt(this.id)+"&type=balance";this.$.autoAjax("get",t,"",{ok:t=>{if(0==t.state&&t.data){let s=t.data;for(let t in s)e[t]=s[t];this.accountFrom.total_balance=parseInt(this.accountFrom.balance)+parseInt(this.accountFrom.freeze_withdraw)+parseInt(this.accountFrom.freeze_append)}this.refresh_bool&&(this.loading=!1,this.$message.success(LANG["刷新成功"]||"刷新成功"))},p:()=>{},error:e=>{console.log(e)}}).catch(e=>{})},refreshModel(){this.refresh_bool=!0,this.loading=!0,this.init()},adjustedBalance(){this.$router.push({path:"/manual",query:{username:this.username,role:"1"}})}},created(){this.refresh_bool=!1,this.init()}};var u=function(e){s(477)},p=Object(r.a)(c,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"accountBalance"}},[s("div",{staticClass:"clearfix",staticStyle:{margin:"0 auto",width:"933px"}},[s("el-col",[s("div",{staticClass:"title"},[e._v(e._s(e.LANG["帐户余额"]||"帐户余额"))])]),e._v(" "),s("el-col",{staticStyle:{"margin-bottom":"10px"}},[s("span",{staticClass:"fl10",domProps:{textContent:e._s(e.LANG["货币:"]||"货币:")}}),e._v(e._s(e.accountFrom.currency_name)+"\n            "),s("span",{staticClass:"fl10",domProps:{textContent:e._s(e.LANG["最后更新时间:"]||"最后更新时间:")}}),e._v(e._s(e.accountFrom.updated)+"\n            "),s("div",{staticStyle:{float:"right"}},[s("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small"},on:{click:e.refreshModel}},[e._v(e._s(e.LANG["刷新余额"]||"刷新余额"))]),e._v(" "),s("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small"},on:{click:e.adjustedBalance}},[e._v(e._s(e.LANG["调整余额"]||"调整余额"))])],1)]),e._v(" "),s("el-col",{staticClass:"border1"},[s("el-form",{attrs:{model:e.accountFrom,"label-width":"100px"}},[s("el-col",{staticClass:"item",attrs:{span:24}},[s("el-form-item",{attrs:{label:e.LANG["主帐户"]||"主帐户"}},[s("span",[e._v(e._s(e.accountFrom.balance))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["提款冻结"]||"提款冻结"}},[s("span",[e._v(e._s(e.accountFrom.freeze_withdraw))])])],1),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:12}},[s("el-form-item",{attrs:{label:e.LANG["代理钱包"]||"代理钱包"}},[s("span",[e._v(e._s(e.accountFrom.benefit_balance))])])],1),e._v(" "),e._l(e.accountFrom.children,function(t,a){return s("el-col",{key:t.game_type,staticClass:"item",attrs:{span:a%2==0&&a===e.accountFrom.children.length-1?24:12}},[s("el-form-item",{attrs:{label:e.LANG[t.game_type+"余额"]||t.game_type+"余额"}},[s("span",[e._v(e._s(t.balance))])])],1)}),e._v(" "),s("el-col",{staticClass:"item",attrs:{span:24}},[s("el-form-item",{attrs:{label:e.LANG["总余额"]||"总余额"}},[s("span",[e._v(e._s(e.accountFrom.amount))])])],1)],2)],1)],1)])},[],!1,u,null,null).exports,h={data:()=>({LANG:LANG,columnsUrl:"",tableUrl:"",formType:"",allData:{},tableData:{list:[]},gridData:[]}),components:{tablegrid:a.a},props:{id:Number},methods:{init(){this.columnsUrl="/static/json/accoutManage/memberManagement/withdrawInformation/columns.json",this.tableUrl=URL.api+ROUTES.GET.user.Audit+"?id="+parseInt(this.id)+"&type=withdraw"},refreshModel(){"edit"==this.formType?this.formType="add":this.formType="edit"},doHandle(){},getTableData(e){this.allData=e.allData;let t=e.allData.list;e.allData.list&&t.forEach(e=>{e.withdraw_bet_coupon||e.withdraw_bet_principal||(e.withdraw_bet_principal=e.withdraw_bet,e.withdraw_bet_coupon=0)})},doHandleDetail(e){switch(e.fn){case"showRebateProportion":this.showRebateProportion(e.row,event);break;case"hideRebateProportion":this.hideRebateProportion(item.row,item.event)}},showRebateProportion(e,t){let s=e.valid_bet_detail;if(!(s.length<=0)){this.gridData.splice(0,this.gridData.length);let e=this.gridData;for(let t=0;t<s.length;t++)e.push({label:s[t].name,value:s[t].valid_bet})}}},computed:{},mounted(){},created(){this.init()}};var b=function(e){s(478)},f=Object(r.a)(h,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"withdrawInformation"}},[s("div",{staticClass:"clearfix"},[s("el-col",[s("div",{staticClass:"title"},[e._v(e._s(e.LANG["即时稽核"]||"即时稽核"))]),e._v(" "),s("div",{staticStyle:{float:"right"}},[s("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small"},on:{click:e.refreshModel}},[e._v("\n                        "+e._s(e.LANG["即时稽核"]||"即时稽核")+"\n                    ")])],1)]),e._v(" "),s("el-col",[s("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableUrl:e.tableUrl,getData:!0,pageSet:!1,tableData:e.tableData,formType:e.formType,automation:!0,hoverData:e.gridData,isCreated:!0,"do-hover":e.doHandle,showRefresh:!1},on:{"get-table-data":e.getTableData,"do-handle":e.doHandleDetail}},[e.allData.list&&e.allData.list.length?s("tr",{staticClass:"sumdiv ml20",attrs:{slot:"other",span:12},slot:"other"},[s("td",{attrs:{colspan:"9"}},[s("div",{staticClass:"cell"},[s("span",{staticClass:"font14 tCent"},[e._v(e._s(e.LANG["常态稽核"]||"常态稽核")+" : "+e._s(e.allData.total_admin_fee)+" "+e._s(e.LANG["元"]||"元"))]),e._v(" "),s("span",{staticClass:"ml10 mr10"},[e._v(" | ")]),e._v(" "),s("span",{staticClass:"font14 ml10"},[e._v(e._s(e.LANG["优惠稽核"]||"优惠稽核")+" : "+e._s(e.allData.total_coupon)+" "+e._s(e.LANG["元"]||"元"))]),e._v(" "),s("span",{staticClass:"ml10 mr10"},[e._v(" | ")]),e._v(" "),s("span",{staticClass:"font14"},[e._v(e._s(e.LANG["出款手续费"]||"出款手续费")+" : "+e._s(e.allData.total_fee)+" "+e._s(e.LANG["元"]||"元"))])])])]):e._e(),e._v(" "),e.allData.list&&e.allData.list.length?s("tr",{staticClass:"sumdiv ml20",attrs:{slot:"other",span:12},slot:"other"},[s("td",{attrs:{colspan:"9"}},[s("div",{staticClass:"cell"},[s("span",{staticClass:"font14"},[e._v(e._s(e.LANG["共需扣除费用"]||"共需扣除费用")+" ："+e._s(e.allData.total_fee)+"+"+e._s(e.allData.total_admin_fee)+"+"+e._s(e.allData.total_coupon)+"\n\t\t\t\t\t\t\t\t= "+e._s(parseInt(e.allData.total_coupon+e.allData.total_fee+e.allData.total_admin_fee))+" "+e._s(e.LANG["元"]||"元"))])])])]):e._e()])],1)],1)])},[],!1,b,null,null).exports,_=s(198),g={data:()=>({LANG:LANG,columnsUrl:"",tableUrl:"",sumArr:[3e3,2700],type:"default",formTitel:"",labelWidth:"90px",isEdit:{state:!1},formVisible:{state:!1},formConfig:[{prop:"bank_id",value:"",label:"银行名称",type:"select",list:[],rules:[{require:!0}]},{prop:"accountname",value:"",type:"text",label:"户名",disabled:!1,rules:[{require:!0}]},{prop:"card",value:"",type:"account",label:"银行账号",rules:[{require:!0}]},{prop:"address",value:"",type:"text",label:"开户行",rules:[{require:!0}]}],formType:"",nowId:-1,updated:!1,uid:-1}),props:{id:Number},components:{tablegrid:a.a,formEdit:_.a},methods:{init(){this.columnsUrl="/static/json/accoutManage/memberManagement/bankDetial/columns.json",this.tableUrl=URL.api+ROUTES.GET.user.newInfo+"?id="+parseInt(this.id)+"&type=bank";let e=this.formConfig[0].list;this.$.autoAjax("get",URL.api+ROUTES.GET.banks,"",{ok:t=>{let s=t.data;for(let t in s)e.push({label:s[t].name,value:s[t].id.toString()})},p:()=>{},error:e=>{console.log(e)}})},addBank(){"0"===sessionStorage.role||"false"!==sessionStorage.bank_card?(this.formConfig[1].disabled=!1,this.formTitel=this.LANG["添加银行帐号"]||"添加银行帐号",this.formType="add",this.formVisible.state=!0):this.$message.error(this.LANG["您没有修改权限"]||"您没有修改权限")},saveForm(e){let t="",s="",a={};a.bank_id=parseInt(e.formObj.bank_id,10),a.accountname=e.formObj.accountname,a.address=e.formObj.address,a.card=e.formObj.card,a.uid=this.id,a.role=1;let i=this.formConfig[0].list.filter(e=>e.value==a.bank_id);a.bank_name=i[0].label,s="add"==this.formType?URL.api+ROUTES.PUT.user.info:URL.api+ROUTES.PUT.user.info+"?id="+parseInt(this.nowId),this.updated=!1,this.$.autoAjax("put",s,a,{ok:e=>{0==e.state&&e.data?(t="add"==this.formType?this.LANG["恭喜您，银行帐号添加成功！"]||"恭喜您，银行帐号添加成功！":this.LANG["恭喜您，银行帐号修改成功！"]||"恭喜您，银行帐号修改成功！",this.$message.success(t),this.updated=!0):4003==e.state||405==e.state?(t="add"==this.formType?this.LANG["银行帐号添加失败，权限不足！"]||"银行帐号添加失败，权限不足！":this.LANG["银行帐号修改失败，权限不足！"]||"银行帐号修改失败，权限不足！",this.$message.error(t)):this.$message.error(e.msg)},p:()=>{},error:e=>{console.log(e)}})},doHandle(e){if("0"===sessionStorage.role||"false"!==sessionStorage.bank_card)switch(e.fn){case"doEdit":this.doEdit(e.row);break;case"doDisable":this.doDisable(e.row);break;case"doEnable":this.doEnable(e.row)}else this.$message.error(this.LANG["您没有修改权限"]||"您没有修改权限")},doEdit(e){console.log(e),this.formConfig[1].disabled=!0,this.nowId=e.id,this.formType="",this.formTitel=this.LANG["修改银行帐号"]||"修改银行帐号",setTimeout(()=>{let t=this.formConfig[0].list;for(let s in t)t[s].label==e.bank_name&&(this.formConfig[0].value=t[s].value.toString());this.formConfig[1].value=e.accountname,this.formConfig[2].value=e.card,this.formConfig[3].value=e.address,this.formType="edit",this.isEdit.state=!0,this.formVisible.state=!0},500)},doDisable(e){this.nowId=e.id;let t=this;this.updated=!1,this.$.autoAjax("patch",URL.api+ROUTES.PUT.user.info+"?id="+parseInt(this.nowId,10),{status:0,uid:this.id,role:1},{ok:e=>{null!=e.state&&0==e.state&&0==e.state?(t.$message.success(t.LANG["银行卡停用成功"]||"银行卡停用成功"),t.updated=!0):4003==e.state||405==e.state?this.$message.error(LANG["银行卡停用失败，权限不足！"]||"银行卡停用失败，权限不足！"):t.$message.error(t.LANG["银行卡停用失败，请稍后重试"]||"银行卡停用失败，请稍后重试")},p:()=>{},error:e=>{console.log(e)}})},doEnable(e){this.nowId=e.id;let t=this;this.updated=!1,this.$.autoAjax("patch",URL.api+ROUTES.PUT.user.info+"?id="+parseInt(this.nowId,10),{status:1,uid:this.id,role:1},{ok:e=>{null!=e.state&&0==e.state&&0==e.state?(t.$message.success(t.LANG["银行卡启用成功"]||"银行卡启用成功"),t.updated=!0):4003==e.state||405==e.state?this.$message.error(LANG["银行卡启用失败，权限不足！"]||"银行卡启用失败，权限不足！"):t.$message.error(LANG["银行卡启用失败，请稍后重试"]||"银行卡启用失败，请稍后重试")},p:()=>{},error:e=>{console.log(e)}})}},computed:{},mounted(){},created(){this.uid=JSON.parse(sessionStorage.getItem("user")).id||-1,this.init()}};var v=function(e){s(479)},L=Object(r.a)(g,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"bankDetail"}},[s("div",{staticClass:"clearfix"},[s("el-col",[s("div",{staticClass:"title"},[e._v(e._s(e.LANG["银行信息"]||"银行信息"))]),e._v(" "),s("div",[s("span",{staticStyle:{color:"#ff0000"}},[e._v(e._s(e.LANG["注"]||"注")+":")]),e._v(e._s(e.LANG["当会员存在真实姓名，新增或编辑银行卡默认户名为会员的真实姓名！"]||"当会员存在真实姓名，新增或编辑银行卡默认户名为会员的真实姓名！"))]),e._v(" "),s("div",{staticStyle:{float:"right"}},[s("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small"},on:{click:e.addBank}},[e._v(e._s(e.LANG["新增银行卡"]||"新增银行卡"))])],1)]),e._v(" "),s("el-col",[s("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableUrl:e.tableUrl,tableCheck:!1,tableIndex:!1,pageSet:!1,automation:!0,isCreated:!0,updated:e.updated,showRefresh:!1},on:{"do-handle":e.doHandle}})],1),e._v(" "),s("el-col",[s("formEdit",{attrs:{formTitel:e.formTitel,formVisible:e.formVisible,formConfig:e.formConfig,type:e.type,labelWidth:e.labelWidth,isEdit:e.isEdit,formType:e.formType},on:{"get-form":e.saveForm}})],1)],1)])},[],!1,v,null,null).exports,A=s(201),N={data:()=>({LANG:LANG,memberForm:{state:!1,online:!1,is_mtoken_bind:!0,limit_status:!1,refuse_withdraw:!1,refuse_sale:!1,refuse_rebate:!1,refuse_transfer:[],role:1},Enable:!1,num:0,confirmConfig:{state:!1,msg:"",fn:"",obj:{}},option:"",loading:!1}),props:{id:Number},components:{confirm:A.a},methods:{init(){let e=this.memberForm;this.$.autoAjax("get",URL.api+"/user/setting/"+parseInt(this.id),"",{ok:t=>{if(0==t.state&&t.data){let s=t.data;for(let t in s){if("refuse_withdraw"==t||"refuse_sale"==t||"refuse_rebate"==t||"limit_status"==t||"state"==t||"is_mtoken_bind"==t)e[t]="1"==s[t];else if("refuse_transfer"==t){e.refuse_transfer=[];for(let a in s[t]){let i=a,r="1"==s[t][a];e.refuse_transfer.push({label:i,val:r})}}else e[t]=s[t];"state"==t&&(this.num="0"==s[t]?1:0)}e.online=parseInt(e.online)}},p:()=>{},error:e=>{console.log(e)}})},systemConfrim(e,t){if("changeLimit"==e){let s="是否确认";s=s+(t?"启用":"停用")+"该会员？",this.confirmConfig={state:!0,msg:s,fn:e,obj:{val:t}}}else if("changeStatus"==e){let s="确认";s=s+("enable"==t?"启用":"停用")+"该会员的代理功能？",this.confirmConfig={state:!0,msg:s,fn:e,obj:{val:t}}}else{let s="是否确认";switch(e){case"offLine":s+="踢线该会员？";break;case"releaseRestriction":s+="解除该会员自我登录限制？";break;case"MremoveBinding":s+="M令牌解绑？"}this.confirmConfig={state:!0,msg:s,fn:e,obj:{val:t}}}},saveWithdrawSet(e,t){let s="",a=e?"启用":"停用",i="";switch(t){case"refuse_withdraw":s=(LANG["确认"]||"确认")+'"'+(LANG[a]||a)+'"'+(LANG["禁止提款吗?"]||"禁止提款吗?"),i="refuse_withdraw";break;case"refuse_sale":s=(LANG["确认"]||"确认")+'"'+(LANG[a]||a)+'"'+(LANG["禁止优惠吗?"]||"禁止优惠吗?"),i="refuse_sale";break;case"refuse_rebate":s=(LANG["确认"]||"确认")+'"'+(LANG[a]||a)+'"'+(LANG["禁止返水吗?"]||"禁止返水吗?"),i="refuse_rebate";break;default:s=(LANG["确认"]||"确认")+'"'+(LANG[a]||a)+'"'+(LANG["禁止"+t+"额度转换吗?"]||"禁止"+t+"额度转换吗?"),i=t}this.confirmConfig={state:!0,msg:s,fn:i,obj:{val:e}}},doConfirm(e){let t=e.fn;switch(t){case"changeLimit":this.changeLimit();break;case"offLine":this.offLine();break;case"changeStatus":this.changeStatus(e);break;case"accountStatusSet":this.accountStatusSet();break;case"releaseRestriction":this.releaseRestriction();break;case"MremoveBinding":this.MremoveBinding();break;case"refuse_withdraw":this.doProhibit("refuse_withdraw");break;case"refuse_sale":this.doProhibit("refuse_sale");break;case"refuse_rebate":this.doProhibit("refuse_rebate");break;default:this.doProhibit("refuse_transfer",t)}},changeStatus(e){let t={id:this.id,status:e.obj.val};this.$.autoAjax("PUT",URL.api+ROUTES.PUT.state.tatus,t,{ok:t=>{t.data&&0==t.state&&this.$message.success(("disable"==e.obj.val?"停用":"启用")+"该会员代理功能成功"),this.loading=!1,this.init()},p:()=>{},error:e=>{console.log(e)}})},doProhibit(e,t){let s=0;if(t){let e=[];for(let t of this.memberForm.refuse_transfer)t.val&&e.push(t.label);s=e.join(",")}else s=this.confirmConfig.obj.val?"1":"0";let a={ids:this.id.toString(),auth:e,status:s};this.loading=!0,this.$.autoAjax("patch",URL.api+"/user/prohibition/"+parseInt(this.id),a,{ok:e=>{e.data&&0==e.state?this.$message.success(this.LANG["权限设置成功"]||"权限设置成功"):4003==e.state||405==e.state?this.$message.error(this.LANG["权限设置失败，没有权限"]||"权限设置失败，没有权限"):this.$message.error(this.LANG["权限设置失败，请稍后重试"]||"权限设置失败，请稍后重试"),this.loading=!1,this.init()},p:()=>{},error:e=>{console.log(e)}})},changeLimit(){if(this.memberForm.state){let e=this;this.$.autoAjax("put",URL.api+ROUTES.PUT.user.setting+parseInt(this.id),{ids:this.id.toString(),state:0},{ok:t=>{t.data&&0==t.state?e.$message.success(e.LANG["会员帐号停用成功"]||"会员帐号停用成功"):4003==t.state||405==t.state?e.$message.error(e.LANG["修改失败，没有权限"]||"修改失败，没有权限"):e.$message.error(e.LANG["会员帐号停用失败，请稍后重试"]||"会员帐号停用失败，请稍后重试"),this.Enable=!1,this.init()},p:()=>{},error:e=>{console.log(e)}})}else{let e=this;this.$.autoAjax("put",URL.api+ROUTES.PUT.user.setting+parseInt(this.id),{ids:this.id.toString(),state:1},{ok:t=>{t.data&&0==t.state?e.$message.success(e.LANG["会员帐号启用成功"]||"会员帐号启用成功"):4003==t.state||405==t.state?e.$message.error(e.LANG["修改失败，没有权限"]||"修改失败，没有权限"):e.$message.error(e.LANG["会员帐号启用失败，请稍后重试"]||"会员帐号启用失败，请稍后重试"),this.init()},p:()=>{},error:e=>{console.log(e)}})}this.confirmConfig={state:!1}},offLine(){let e=this;this.$.autoAjax("patch",URL.api+ROUTES.PATCH.user.setting+parseInt(this.id),{ids:this.id.toString(),online:0},{ok:t=>{t.data&&0==t.state?(e.memberForm.online=!1,e.$message.success(e.LANG["会员踢线成功"]||"会员踢线成功")):4003==t.state||405==t.state?e.$message.error(e.LANG["修改失败，没有权限"]||"修改失败，没有权限"):e.$message.error(e.LANG["会员踢线失败，请稍后重试"]||"会员踢线失败，请稍后重试")},p:()=>{},error:e=>{console.log(e)}})},releaseRestriction(){let e=this;this.$.autoAjax("patch",URL.api+ROUTES.PATCH.user.setting+parseInt(this.id),{ids:this.id.toString(),limit_status:0},{ok:t=>{t.data&&0==t.state?(e.memberForm.limit_status=!1,e.$message.success(e.LANG["解除用户自我登录限制成功"]||"解除用户自我登录限制成功")):4003==t.state||405==t.state?e.$message.error(e.LANG["解除用户自我登录限制失败，权限不足"]||"解除用户自我登录限制失败，权限不足"):e.$message.error(e.LANG["解除用户自我登录限制失败，请稍后重试"]||"解除用户自我登录限制失败，请稍后重试")},p:()=>{},error:e=>{console.log(e)}})},MremoveBinding(){this.$.autoAjax("post",URL.api+"/admin/login.unbind",{uid:this.memberForm.id,role:this.memberForm.role},{ok:e=>{0==e.state&&e.data?(this.memberForm.is_mtoken_bind=!1,this.$message.success(this.LANG["解绑成功"]||"解绑成功")):4003==e.state||405==e.state?this.$message.error(this.LANG["解绑失败，权限不足"]||"解绑失败，权限不足"):this.$message.error(this.LANG["解绑失败"]||"解绑失败")},p:()=>{},error:e=>{console.log(e)}})},doCancel(e){switch(e.fn){case"refuse_withdraw":this.memberForm.refuse_withdraw=!e.obj.val;break;case"refuse_sale":this.memberForm.refuse_sale=!e.obj.val;break;case"refuse_rebate":this.memberForm.refuse_rebate=!e.obj.val;break;default:this.setRefuseTransfer(e)}},setRefuseTransfer(e){for(let t of this.memberForm.refuse_transfer)e.fn==t.label&&(t.val=!e.obj.val)}},computed:{},mounted(){},created(){this.init()}};var y=function(e){s(480)},G=Object(r.a)(N,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"memberSet"}},[s("div",{staticClass:"clearfix",staticStyle:{margin:"0 auto",width:"933px"}},[s("el-col",[s("div",{staticClass:"title"},[e._v(e._s(e.LANG["会员设置"]||"会员设置"))])]),e._v(" "),s("el-col",[s("el-col",{attrs:{span:6}},[s("span",[e._v(e._s(e.LANG["帐号状态："]||"帐号状态："))]),e._v(" "),s("span",{staticClass:"sucess"},[e._v(e._s(e.memberForm.state?"启用":"停用"))]),e._v(" "),e.memberForm.state?e._e():s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.systemConfrim("changeLimit",!e.memberForm.state)}}},[e._v(e._s(e.LANG["启用"]||"启用"))]),e._v(" "),e.memberForm.state?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.systemConfrim("changeLimit",!e.memberForm.state)}}},[e._v(e._s(e.LANG["停用"]||"停用"))]):e._e()],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("span",[e._v(e._s(e.LANG["代理状态："]||"代理状态："))]),e._v(" "),s("span",{staticClass:"sucess"},[e._v(e._s("wait"==e.memberForm.agent_status?"待审核":"enable"==e.memberForm.agent_status?"启用":"停用"))]),e._v(" "),"disable"==e.memberForm.agent_status?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.systemConfrim("changeStatus","enable")}}},[e._v(e._s(e.LANG["启用"]||"启用"))]):e._e(),e._v(" "),"enable"==e.memberForm.agent_status?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.systemConfrim("changeStatus","disable")}}},[e._v(e._s(e.LANG["停用"]||"停用"))]):e._e(),e._v(" "),"wait"==e.memberForm.agent_status?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.systemConfrim("changeStatus","enable")}}},[e._v(e._s(e.LANG["启用"]||"启用"))]):e._e()],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.LANG["M令牌状态："]||"M令牌状态："))]),e._v(" "),s("span",{staticClass:"sucess"},[e._v(e._s(e.memberForm.is_mtoken_bind?"已绑定":"未绑定"))]),e._v(" "),e.memberForm.is_mtoken_bind?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.systemConfrim("MremoveBinding")}}},[e._v(e._s(e.LANG["解绑"]||"解绑"))]):e._e()],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.LANG["在线状态："]||"在线状态："))]),e._v(" "),s("span",{staticClass:"sucess"},[e._v(e._s(e.memberForm.online?"在线":"离线"))]),e._v(" "),e.memberForm.online?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.systemConfrim("offLine")}}},[e._v(e._s(e.LANG["踢出"]||"踢出"))]):e._e()],1),e._v(" "),s("el-form",{staticClass:"form",staticStyle:{"margin-top":"50px"}},[s("el-form-item",{attrs:{label:e.LANG["权限设置"]||"权限设置"}},[s("el-checkbox",{on:{change:function(t){return e.saveWithdrawSet(e.memberForm.refuse_withdraw,"refuse_withdraw")}},model:{value:e.memberForm.refuse_withdraw,callback:function(t){e.$set(e.memberForm,"refuse_withdraw",t)},expression:"memberForm.refuse_withdraw"}},[e._v(e._s(e.LANG["禁止提款"]||"禁止提款"))]),e._v(" "),s("el-checkbox",{on:{change:function(t){return e.saveWithdrawSet(e.memberForm.refuse_sale,"refuse_sale")}},model:{value:e.memberForm.refuse_sale,callback:function(t){e.$set(e.memberForm,"refuse_sale",t)},expression:"memberForm.refuse_sale"}},[e._v(e._s(e.LANG["禁止优惠"]||"禁止优惠"))]),e._v(" "),s("el-checkbox",{on:{change:function(t){return e.saveWithdrawSet(e.memberForm.refuse_rebate,"refuse_rebate")}},model:{value:e.memberForm.refuse_rebate,callback:function(t){e.$set(e.memberForm,"refuse_rebate",t)},expression:"memberForm.refuse_rebate"}},[e._v(e._s(e.LANG["禁止返水"]||"禁止返水"))])],1),e._v(" "),s("el-form-item",{attrs:{label:e.LANG["禁止额度转换"]||"禁止额度转换"}},e._l(e.memberForm.refuse_transfer,function(t){return s("el-checkbox",{key:t.label,on:{change:function(s){return e.saveWithdrawSet(t.val,t.label)}},model:{value:t.val,callback:function(s){e.$set(t,"val",s)},expression:"item.val"}},[e._v(e._s(t.label))])}),1)],1)],1),e._v(" "),s("el-col",[s("confirm",{attrs:{confirmConfig:e.confirmConfig},on:{"do-confirm":e.doConfirm,"do-cancel":e.doCancel}})],1)],1)])},[],!1,y,"data-v-196b3f1e",null).exports,w={data:()=>({LANG:LANG,activeName:"basicInformation"}),props:{nowId:Number,username:String},components:{sInformation:o,basicInformation:d,accountBalance:p,memberManagement:f,bankDetail:L,memberSet:G},methods:{init(){},returnPage(){this.$emit("return-page")},tabClick(){}},computed:{},mounted(){},created(){this.init()}};var k=function(e){s(474)},F=Object(r.a)(w,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"memberManagementDetia"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"bankBtn pRight20",attrs:{type:"primary",icon:"arrow-left",size:"small"},on:{click:e.returnPage}},[e._v(e._s(e.LANG["返 回"]||"返 回")+"\n            ")])],1),e._v(" "),s("el-col",{staticClass:"mt20",attrs:{span:24}},[s("div",{staticClass:"bg-purple-dark userTitle pleft"},[e._v("当前:"),s("el-tag",{staticClass:"font14 ml10 mr10",attrs:{type:"primary",color:"#fff"}},[e._v(e._s(e.username))]),e._v(e._s(e.LANG["用户资料"]||"用户资料"))],1),e._v(" "),s("el-tabs",{staticClass:"w100",attrs:{type:"border-card"},on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:e.LANG["基本资料"]||"基本资料",name:"basicInformation"}},[s("basicInformation",{attrs:{id:e.nowId}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:e.LANG["帐户余额"]||"帐户余额",name:"accountBalance"}},[s("accountBalance",{attrs:{id:e.nowId,username:e.username}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:e.LANG["取款稽核信息"]||"取款稽核信息",name:"memberManagement"}},[s("memberManagement",{attrs:{id:e.nowId}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:e.LANG["银行信息"]||"银行信息",name:"bankDetail"}},[s("bankDetail",{attrs:{id:e.nowId}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:e.LANG["会员设置"]||"会员设置",name:"memberSet"}},[s("memberSet",{attrs:{id:e.nowId}})],1)],1)],1)],1)],1)},[],!1,k,"data-v-b8212bd4",null).exports,C={data:()=>({LANG:LANG,isDetail:!1,isCreated:!1,tableUrl:"",columnsUrl:"",tabOperation:[{label:"批量踢线",fn:"doOffline"},{label:"批量停用",fn:"doStop"},{label:"发送消息",fn:"doSendMsg"},{label:"调整余额",fn:"doAllAdjustedBalance"}],type:"search",formTitel:"",labelWidth:"90px",isEdit:{},formVisible:{state:!1},searchConfig:[{prop:"similar",value:"",type:"checkbox",label:"查询配置",valLabel:"模糊查询用户名"},{prop:"name",value:"",type:"text",label:"用户名"},{prop:"ip",value:"",label:"最后登录IP",type:"text"},{prop:"online",value:"",label:"在线状态",type:"select",list:ARRAYS.onlineState1,isDefault:!0},{prop:"state",value:"",label:"帐号状态",type:"select",list:[{label:"全部",value:""},{label:"启用",value:"1"},{label:"停用",value:"0"},{label:"封号",value:"4"}],isDefault:!0},{prop:"agent",value:"",type:"text",label:"上级代理"},{prop:"agent_id",value:"",type:"checkbox",label:"",valLabel:"直属用户"},{type:"dateGroup",label:"注册时间",prop:[{prop:"register_from",value:"",label:"开始时间"},{prop:"register_to",value:"",label:"结束时间"}]},{prop:"channel",value:"",label:"注册来源",type:"select",list:ARRAYS.PALYCHANNEL},{prop:"tags",value:"",label:"标签",type:"select",list:[]},{prop:"type",value:"",label:"扩展搜索",type:"selectString",list:[{label:"真实姓名",value:"pname"},{label:"手机",value:"moblie"},{label:"银行卡",value:"card"},{label:"邮箱",value:"email"},{label:"QQ",value:"qq"},{label:"微信",value:"weixin"}],propInput:"keyVal",Inputplaceholder:"请输入关键字"}],nowId:-1,username:"",labelList:[],labelVisible:!1,labelform:{name:"",lid:""},confirmConfig:{state:!1,msg:"",fn:"",obj:{}},baseUrl:"",routeQuery:{},updated:!1,formType:"",limitVisible:!1,limitform:{name:"",id:""},limitList:[],cancelLimitVisible:!0,hoverData:[],query:{},updateKeys:""}),props:{userid:Number},components:{tablegrid:a.a,memberManagementDetial:F,formEdit:_.a,confirm:A.a},methods:{init(){this.isCreated=!0,this.routeQuery=this.$route.query,this.baseUrl=URL.api+ROUTES.GET.user.list,this.routeQuery.userId>0&&this.routeQuery.isDetail&&this.doDetial({id:this.routeQuery.userId}),"{}"==JSON.stringify(this.$route.query)&&(this.query={online:"1",state:"1"},this.tableUrl=URL.api+ROUTES.GET.user.list+this.addSearch({online:"1",state:"1"})),this.columnsUrl="/static/json/accoutManage/memberManagement/columns.json",this.getLables(),this.getLimitModel(),this.userid>0&&(this.nowId=this.userid,this.isCreated=!1,this.isDetail=!0)},doQuery(e){let t=this.query={};for(let s in e.item)"similar"===s?t[s]=e.item[s]?1:0:"agent_id"===s?t.agent_id=e.item[s]?0:null:(e.item[s]||0==e.item[s])&&(t[s]=e.item[s]);this.tableUrl=this.baseUrl+this.addSearch(t)},outputExcel(){},getLables(){this.$.autoAjax("get",URL.api+ROUTES.GET.user.labels,"",{ok:e=>{this.labelList=[],this.searchConfig[9].list=[];let t=e.data;this.searchConfig[9].list.push({label:"全部",value:""});for(let e in t)this.labelList.push({label:t[e].title,value:t[e].id}),this.searchConfig[9].list.push({label:t[e].title,value:t[e].title})},p:()=>{},error:e=>{console.log(e)}})},getLimitModel(){this.$.autoAjax("get",URL.api+ROUTES.GET.lottery.template,"",{ok:e=>{if(0===e.state){this.limitList=[];let t=e.data;for(let e of t)"1"!=e.t_id&&this.limitList.push({id:parseInt(e.t_id),name:e.t_name})}},p:()=>{},error:e=>{console.log(e)}})},doHandle(e){switch(e.fn){case"doAddLabel":this.doAddLabel(e.row);break;case"doDetial":this.doDetial(e.row);break;case"doAdjustedBalance":this.doAdjustedBalance(e.row);break;case"openAgentInformation":this.openAgentInformation(e.row);break;case"doNoteManagement":this.doNoteManagement(e.row);break;case"doFundDetails":this.doFundDetails(e.row);break;case"doEnabled":this.doEnabled(e.row);break;case"doDisabled":this.doDisabled(e.row);break;case"doSeal":this.doSeal(e.row);break;case"doUnlock":this.doUnlock(e.row);break;case"doCancelLabel":this.doCancelLabel(e.row);break;case"doLimitLines":this.doLimitLines(e.row);break;case"showSubPurse":this.showSubPurse(e)}},showSubPurse(e){let t=e.row;this.hoverData=[];let s=this.hoverData;this.$.autoAjax("get",URL.api+"/cash/funds/secondary?wallet_id="+parseInt(t.wallet_id),"",{ok:e=>{if(0==e.state&&e.data){let t=e.data||[];for(let e in t)s.push({label:t[e].gameType,value:FORMATMONEY(t[e].balance)})}else this.$message.error(LANG["会员打标签失败！"]||"会员打标签失败！")},p:()=>{},error:e=>{console.log(e)}})},doAddLabel(e){if(this.nowId=e.id,this.labelVisible=!0,this.labelform.name=e.username,e.tags)for(let t=0;t<this.labelList.length;t++)this.labelList[t].label===e.tags&&(this.labelform.lid=this.labelList[t].value.toString());else this.labelform.lid=""},doCancelLabel(e){this.nowId=parseInt(e.id),parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定取消标签"]||"确定取消标签")+'"'+e.tags+'"'+(this.LANG["吗"]||"吗")+"?",this.confirmConfig.fn="cancelLabel")},saveLabels(){this.updated=!1,this.$.autoAjax("put",URL.api+ROUTES.PUT.user.label.bind+"?id="+parseInt(this.nowId,10),{tag:parseInt(this.labelform.lid,10)},{ok:e=>{0==e.state&&e.data?(this.$message.success(LANG["恭喜您，会员打标签成功！"]||"恭喜您，会员打标签成功！"),this.labelVisible=!1,this.updated=!0):4001===e.state?this.$message.error(LANG["请至少选择一个标签！"]||"请至少选择一个标签！"):405==e.state?this.$message.error(LANG["打标签失败，权限不足"]||"打标签失败，权限不足！"):this.$message.error(LANG["会员打标签失败！"]||"会员打标签失败！")},p:()=>{},error:e=>{console.log(e)}})},doDetial(e){this.nowId=parseInt(e.id),this.username=e.username,this.isCreated=!1,this.isDetail=!0},returnPage(){this.updateKeys="";let e="";for(let t in this.query)"similar"===t?e=e+t+","+!!this.query[t]+",":"agent_id"===t?e=e+t+","+(0===this.query[t])+",":this.query[t]&&(e=e+t+","+this.query[t]+",");setTimeout(()=>{this.updateKeys=e},500),this.isDetail=!1,this.isCreated=!0,this.tableUrl=this.baseUrl+this.addSearch(this.query)},doOperation(e){switch(this.selectedrows=[],this.selectedrows=e.rows,this.operationType=e.fn,e.fn){case"doOffline":case"doStop":this.doConfrim(e.fn);break;case"doSendMsg":this.doSendMsg();break;case"doAllAdjustedBalance":this.doAllAdjustedBalance()}},doOffline(){let e=this,t=this.selectedrows,s=[];for(let e in t)s.push(t[e].id);let a=s.join(",");this.$.autoAjax("patch",URL.api+ROUTES.PATCH.user.info.$,{ids:a,operation:3},{ok:t=>{0==t.state&&t.data?e.$message.success(LANG["恭喜您，所选会员踢线成功！"]||"恭喜您，所选会员踢线成功！"):405==t.state?e.$message.error(LANG["所选会员踢线失败,权限不足！"]||"所选会员踢线失败,权限不足！"):e.$message.error(LANG["所选会员踢线失败,请稍后重试！"]||"所选会员踢线失败,请稍后重试！")},p:()=>{},error:e=>{console.log(e)}})},doStop(){let e=this,t=this.selectedrows,s=[];for(let e in t)s.push(t[e].id);let a=s.join(",");this.$.autoAjax("",URL.api+ROUTES.GET,{ids:a,operation:2},{ok:t=>{0==t.state&&t.data?e.$message.success(LANG["恭喜您，所选会员踢线成功！"]||"恭喜您，所选会员踢线成功！"):405==t.state?e.$message.error(LANG["所选会员踢线失败,权限不足！"]||"所选会员踢线失败,权限不足！"):e.$message.error(LANG["所选会员踢线失败,请稍后重试！"]||"所选会员踢线失败,请稍后重试！")},p:()=>{},error:e=>{console.log(e)}})},doAllAdjustedBalance(){let e=this.selectedrows;this.$router.push({path:"/manual",query:{userId:this.selectedrows,username:e.user_name,type:"会员"}})},doConfrim(e){let t="";switch(e){case"doOffline":t=LANG["是否确认踢线选中的会员"]||"是否确认踢线选中的会员";break;case"doStop":t=this.confrimContent=LANG["是否确认批量停用选中的会员"]||"是否确认批量停用选中的会员"}this.confirmConfig={state:!0,msg:t,fn:e}},saveConfirm(e){switch(e.fn){case"doOffline":this.doOffline();break;case"doStop":this.doStop();break;case"cancelLabel":this.updated=!1,this.$.autoAjax("put",URL.api+ROUTES.PUT.user.label.bind+"?id="+parseInt(this.nowId,10),{tag:0},{ok:e=>{0==e.state&&e.data?(this.$message.success(LANG["恭喜您，会员标签取消成功！"]||"恭喜您，会员标签取消成功！"),this.labelVisible=!1,this.updated=!0):405==e.state?this.$message.error(LANG["会员标签取消失败,权限不足！"]||"会员标签取消失败,权限不足！"):this.$message.error(LANG["会员标签取消失败！"]||"会员标签取消失败！")},p:()=>{},error:e=>{console.log(e)}})}},doSendMsg(){let e=this.selectedrows;this.$router.push({path:"/notice",query:{userId:this.selectedrows,username:e.user_name,type:"会员"}})},resetForm(e){this.updateKeys="";this.$route.query.agent||this.$route.query.name||this.$route.query.level?setTimeout(()=>{this.updateKeys="redirect,,"},500):(this.query={online:"",state:""},this.tableUrl=URL.api+ROUTES.GET.user.list),this.query={}},doAdjustedBalance(e){this.$router.push({path:"/manual",query:{username:e.username,role:"1"}})},openAgentInformation(e){this.$router.push({path:"/agentAccount",query:{agent_name:e.agent}})},doNoteManagement(e){this.$router.push({path:"/noteManagement",query:{user_name:e.username}})},doFundDetails(e){this.$router.push({path:"/fundDetails",query:{username:e.username}})},doEnabled(e){this.updated=!1,this.$.autoAjax("put",URL.api+ROUTES.PUT.user.setting+parseInt(e.id),{ids:e.id.toString(),state:1},{ok:e=>{null!=e.state&&0==e.state?(this.$message.success(this.LANG["会员帐号启用成功"]||"会员帐号启用成功"),this.updated=!0):4003==e.state||405==e.state?this.$message.error(this.LANG["会员帐号启用失败，权限不足"]||"会员帐号启用失败，权限不足"):this.$message.error(this.LANG["会员帐号启用失败，请稍后重试"]||"会员帐号启用失败，请稍后重试")},p:()=>{},error:e=>{console.log(e)}})},doDisabled(e){this.updated=!1,this.$.autoAjax("put",URL.api+ROUTES.PUT.user.setting+parseInt(e.id),{ids:e.id.toString(),state:0},{ok:e=>{null!=e.state&&0==e.state?(this.$message.success(this.LANG["会员帐号停用成功"]||"会员帐号停用成功"),this.updated=!0):4003==e.state||405==e.state?this.$message.error(this.LANG["会员帐号停用失败，权限不足"]||"会员帐号停用失败，权限不足"):this.$message.error(this.LANG["会员帐号停用失败，请稍后重试"]||"会员帐号停用失败，请稍后重试")},p:()=>{},error:e=>{console.log(e)}})},doSeal(e){this.updated=!1,this.$.autoAjax("put",URL.api+ROUTES.PUT.user.setting+parseInt(e.id),{ids:e.id.toString(),state:4},{ok:e=>{null!=e.state&&0==e.state?(this.$message.success(this.LANG["会员帐号封号成功"]||"会员帐号封号成功"),this.updated=!0):4003==e.state||405==e.state?this.$message.error(this.LANG["会员帐号封号失败，权限不足"]||"会员帐号封号失败，权限不足"):this.$message.error(this.LANG["会员帐号封号失败，请稍后重试"]||"会员帐号封号失败，请稍后重试")},p:()=>{},error:e=>{console.log(e)}})},doUnlock(e){this.updated=!1,this.$.autoAjax("put",URL.api+ROUTES.PUT.user.setting+parseInt(e.id),{ids:e.id.toString(),state:1},{ok:e=>{null!=e.state&&0==e.state?(this.$message.success(this.LANG["会员帐号解封成功"]||"会员帐号解封成功"),this.updated=!0):4003==e.state||405==e.state?this.$message.error(this.LANG["会员帐号解封失败，权限不足"]||"会员帐号解封失败，权限不足"):this.$message.error(this.LANG["会员帐号解封失败，请稍后重试"]||"会员帐号解封失败，请稍后重试")},p:()=>{},error:e=>{console.log(e)}})},doLimitLines(e){this.nowId=e.id,this.limitform.name=e.username,this.limitform.id="",this.cancelLimitVisible=!!e.tid,e.tid?(this.cancelLimitVisible=!0,this.limitform.id=parseInt(e.tid)):(this.cancelLimitVisible=!1,this.limitform.id=""),this.limitVisible=!0},saveLimit(){""!==this.limitform.id?(this.updated=!1,this.$.autoAjax("put",URL.api+"/lottery/template.users",{tid:parseInt(this.limitform.id),user_id:this.nowId},{ok:e=>{0===e.state&&e.data?(this.$message.success(LANG["恭喜您，会员限额成功！"]||"恭喜您，会员限额成功！"),this.updated=!0):405==e.state?this.$message.error(LANG["会员限额失败,权限不足！"]||"会员限额失败,权限不足！"):this.$message.error(LANG["会员限额失败！"]||"会员限额失败！"),this.limitVisible=!1},p:()=>{},error:e=>{console.log(e)}})):this.$message.error(LANG["请至少选中一个模版"]||"请至少选中一个模版")},cancelLimit(){let e=[];e.push(this.nowId),this.updated=!1,this.$.autoAjax("post",URL.api+"/lottery/template.users",{user_id:e},{ok:e=>{0===e.state?(this.$message.success(LANG["恭喜您，会员取消限额成功！"]||"恭喜您，会员取消限额成功！"),this.limitform.id="",this.cancelLimitVisible=!1,this.updated=!0):405==e.state?this.$message.error(LANG["会员取消限额失败,权限不足！"]||"会员取消限额失败,权限不足！"):this.$message.error(LANG["会员取消限额失败！"]||"会员取消限额失败！")},p:()=>{},error:e=>{console.log(e)}})},gotoLotteryOdds(e,t){window.open(window.location.origin+"/lotteryOdds?id="+e+"&name="+t)},setAllForm(e){for(let t in e)"agent"===t&&this.$route.query.agent?e[t]=this.$route.query.agent||"":"name"===t&&this.$route.query.name?e[t]=this.$route.query.name||"":"level"===t&&this.$route.query.level?e[t]=this.$route.query.level||"":e[t]=""}},mounted(){$(()=>{document.getElementsByClassName("popover_diy_btn")[0]})},created(){this.init()},activated(){this.updated=!1,this.updateKeys="",this.isDetail&&this.returnPage(),this.isCreated=!1,this.getLables(),this.getLimitModel(),this.searchConfig[5].value="",this.searchConfig[1].value="",this.searchConfig[6].value="",this.searchConfig[3].value="",this.searchConfig[4].value="",this.formType="update"+(9*Math.random()+1),this.$route.query.agent?(this.searchConfig[5].value=this.$route.query.agent,this.tableUrl=URL.api+ROUTES.GET.user.list+"?agent="+this.$route.query.agent):this.init(),this.$route.query.name?(this.searchConfig[1].value=this.$route.query.name,this.tableUrl=URL.api+ROUTES.GET.user.list+"?name="+this.$route.query.name):this.init(),this.$route.query.level?(this.searchConfig[6].value=this.$route.query.level.toString(),this.tableUrl=URL.api+ROUTES.GET.user.list+"?level="+this.$route.query.level):this.init(),setTimeout(()=>{this.updated=!0},500)},deactivated(){this.$route.query.agent=null,this.$route.query.name=null,this.$route.query.level=null}};var S=function(e){s(473)},x=Object(r.a)(C,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page w100",attrs:{id:"memberManagement"}},[e.isDetail?e._e():s("div",[s("div",[s("formEdit",{attrs:{formTitel:e.formTitel,formVisible:e.formVisible,formConfig:e.searchConfig,type:e.type,labelWidth:e.labelWidth,isEdit:e.isEdit,updateKeys:e.updateKeys,initDate:!0,formType:e.formType,showAdd:!1},on:{"do-query":e.doQuery,"reset-form":e.resetForm}})],1),e._v(" "),s("el-col",[s("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableIndex:!1,tableUrl:e.tableUrl,tabOperation:e.tabOperation,updated:e.updated,isCreated:e.isCreated,hoverData:e.hoverData},on:{"do-operation":e.doOperation,"do-handle":e.doHandle}})],1)],1),e._v(" "),e.isDetail?s("el-col",[s("memberManagementDetial",{attrs:{nowId:e.nowId,username:e.username},on:{"return-page":e.returnPage}})],1):e._e(),e._v(" "),e.isDetail?e._e():s("el-col",{staticClass:"makeTag"},[s("el-dialog",{attrs:{title:"打标签",size:"tiny"},model:{value:e.labelVisible,callback:function(t){e.labelVisible=t},expression:"labelVisible"}},[s("el-form",{ref:"labelform",attrs:{model:e.labelform,"label-width":"80px"}},[s("el-form-item",{attrs:{label:e.LANG["用户名"]||"用户名"}},[s("span",[e._v(e._s(e.labelform.name))])]),e._v(" "),s("el-form-item",{attrs:{label:e.LANG["标签"]||"标签",prop:"lid"}},[s("el-select",{attrs:{placeholder:e.LANG["请选择标签"]||"请选择标签"},model:{value:e.labelform.lid,callback:function(t){e.$set(e.labelform,"lid",t)},expression:"labelform.lid"}},e._l(e.labelList,function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.labelVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.saveLabels}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"会员限额",size:"tiny"},model:{value:e.limitVisible,callback:function(t){e.limitVisible=t},expression:"limitVisible"}},[s("el-form",{ref:"limitform",attrs:{model:e.limitform,"label-width":"80px"}},[s("el-form-item",{attrs:{label:e.LANG["会员账号"]||"会员账号"}},[s("span",[e._v(e._s(e.limitform.name))])]),e._v(" "),s("div",{staticStyle:{"border-bottom":"1px solid #ccc","line-hieght":"30px"}},[e._v("彩票")]),e._v(" "),s("el-radio-group",{model:{value:e.limitform.id,callback:function(t){e.$set(e.limitform,"id",t)},expression:"limitform.id"}},e._l(e.limitList,function(t,a){return s("div",{key:a,staticStyle:{margin:"5px 0",height:"20px"}},[s("div",{staticClass:"fl"},[s("el-radio",{attrs:{label:t.id}},[s("span")])],1),e._v(" "),s("div",{staticStyle:{float:"left",width:"400px",height:"20px","font-size":"14px","line-height":"20px","margin-left":"15px",cursor:"pointer"},on:{click:function(s){return e.gotoLotteryOdds(t.id,t.name)}}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])])}),0)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.limitVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.saveLimit}},[e._v("确 定")]),e._v(" "),e.cancelLimitVisible?s("el-button",{attrs:{type:"primary"},on:{click:e.cancelLimit}},[e._v("解除绑定")]):e._e()],1)],1)],1),e._v(" "),s("el-col",[s("confirm",{attrs:{confirmConfig:e.confirmConfig},on:{"do-confirm":e.saveConfirm}})],1)],1)},[],!1,S,null,null);t.default=x.exports}}]);