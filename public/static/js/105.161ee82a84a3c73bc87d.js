(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{134:function(t,s,e){"use strict";e.r(s);var a={data:()=>({LANG:LANG,columnsUrl:"",tableUrl:"",baseUrl:"",dialogVisible:!1,dialogText:{id:-1,title:"",content:"",create_time:"",is_read:!1},msgId:-1,updated:!1}),methods:{init(){this.$route.query;this.columnsUrl="static/json/webSet/sysMessage/columns.json",this.tableUrl=URL.api+ROUTES.GET.messages,this.baseUrl=URL.api+ROUTES.GET.messages},doHandle(t){switch(this.updated=!1,t.fn){case"doDetail":this.doDetail(t.row);break;case"doDelete":this.doDelete(t.row)}},doDetail(t){let s=t||{},e=this.dialogText;0===parseInt(t.status)&&this.$.autoAjax("put",URL.api+ROUTES.PUT.admin.message,{id:t.id,status:(parseInt(t.status),1)},{ok:t=>{0===t.state&&t.data?this.updated=!0:this.$message.error(LANG["消息查看失败，请稍后试"]||"消息查看失败，请稍后试")},p:()=>{},error:t=>{console.log(t)}}).catch(t=>{this.$message.error(LANG["未知错误，请稍后重试"]||"未知错误，请稍后重试")}),this.editVisible=!0,this.dialogVisible=!0;for(let t in s)e[t]=s[t]},doDelete(t){this.$.autoAjax("put",URL.api+ROUTES.PUT.admin.message,{id:t.id,status:2},{ok:t=>{0===t.state&&t.data?(this.$message.success(LANG["删除成功"]||"删除成功"),this.updated=!0):this.$message.success(LANG["删除失败"]||"删除失败")},p:()=>{},error:t=>{console.log(t)}}).catch(t=>{this.$message.success(LANG["未知错误，请稍后重试"]||"未知错误，请稍后重试")})}},components:{tablegrid:e(197).a},created(){this.init()}},l=e(24);var i=function(t){e(420)},o=Object(l.a)(a,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"sysMessage"}},[e("el-col",[e("tablegrid",{attrs:{columnsUrl:t.columnsUrl,tableUrl:t.tableUrl,updated:t.updated},on:{"do-handle":t.doHandle}})],1),t._v(" "),e("el-dialog",{staticClass:"details",attrs:{title:t.LANG["公告详情"]||"公告详情",size:"tiny"},model:{value:t.dialogVisible,callback:function(s){t.dialogVisible=s},expression:"dialogVisible"}},[e("el-col",{staticClass:"xsDetails",attrs:{span:24}},[e("el-row",{attrs:{gutter:30}},[e("div",{staticClass:"el-col el-col-24"},[e("el-col",{attrs:{span:5}},[e("h3",[t._v(t._s(t.LANG["公告标题"]||"公告标题")+":")])]),t._v(" "),e("el-col",{attrs:{span:19}},[t._v("\n                    "+t._s(t.dialogText.title)+"\n                ")])],1),t._v(" "),e("div",{staticClass:"el-col el-col-24 mt10"},[e("el-col",{attrs:{span:5}},[e("h3",[t._v(t._s(t.LANG["创建时间"]||"创建时间")+":")])]),t._v(" "),e("el-col",{attrs:{span:19}},[t._v("\n                    "+t._s(t.dialogText.created)+"\n                ")])],1),t._v(" "),e("div",{staticClass:"el-col el-col-24 mt10"},[e("el-col",{attrs:{span:5}},[e("h3",[t._v(t._s(t.LANG["公告详情"]||"公告详情")+":")])]),t._v(" "),e("el-col",{attrs:{span:19}},[t._v("\n                    "+t._s(t.dialogText.content)+"\n                ")])],1),t._v(" "),e("el-col",{staticClass:"tCent",staticStyle:{margin:"20px 0","border-top":"1px solid #cccccc","padding-top":"10px","text-align":"right"},attrs:{span:24}},[e("el-button",{on:{click:function(s){t.dialogVisible=!1}}},[t._v(t._s(t.LANG["关闭"]||"关闭"))])],1)],1)],1)],1)],1)},[],!1,i,null,null);s.default=o.exports},420:function(t,s,e){}}]);