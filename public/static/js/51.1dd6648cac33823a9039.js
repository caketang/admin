(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{153:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a(218),o=a(197),i=a(198),r=a(201);s.default.filter("isNew",function(e){return"1"===e?"是":"否"});var n={data:()=>({updated:!1,loading:!1,LANG:LANG,columnsUrl:"",tableUrl:"",dialogVisible:!1,dialogText:"",xqStatus:"",dialogUrl:"",updateKeys:"",searchConfig:[{type:"quickDate",showTimes:!0},{prop:"user_name",value:"",type:"text",label:"用户名"},{prop:"trade_no",value:"",type:"text",label:"交易订单号",width150:!0},{prop:"status",value:"",label:"交易状态",type:"select",list:[{label:"全部",value:""},{label:"已支付",value:"paid"},{label:"待支付",value:"pending"},{label:"支付失败",value:"failed"}]},{prop:"pay_scene",value:"",label:"支付场景",type:"select",list:[{label:"全部",value:""},{label:"支付宝",value:"alipay"},{label:"微信支付",value:"wechat"},{label:"QQ钱包",value:"qqpay"},{label:"网银支付",value:"cyberbank"},{label:"京东支付",value:"jdpay"},{label:"银联支付",value:"unionpay"},{label:"百度支付",value:"baidupay"},{label:"财付通",value:"tenpay"},{label:"点卡支付",value:"kapay"},{label:"云闪付",value:"quickpay"}],filterable:!0},{prop:"name",value:"",label:"商户名称",type:"text",placeholde:""},{type:"dateGroup",label:"提交时间",prop:[{prop:"date_from",value:"",label:"开始时间"},{prop:"date_to",value:"",label:"结束时间"}]},{prop:"give_active",value:"",label:"存款优惠",type:"select",list:[{label:"全部",value:""},{label:"有优惠",value:"1"},{label:"无优惠",value:"0"}]},{type:"numberGroup",label:"交易金额",prop:[{prop:"money_from",value:""},{prop:"money_to",value:""}]},{prop:"admin_user",value:"",type:"text",label:"操作者"},{prop:"levels",value:[],label:"会员等级",sReset:!1,checkAll:!0,allBtnShow:!0,type:"checkGroup",list:[],Arr:[],ifVal:"1",ifKey:"send_type"}],type:"search",labelWidth:"90px",formVisible:{state:!1},isEdit:{state:!1},baseUrl:"",confirmConfig:{state:!1,msg:"",fn:"",obj:""},allData:{page_amount_sum:0,page_coupon_sum:0,total_amount_sum:0,total_coupon_sum:0,total:0},formType:"",outUrl:"",onDialogVisible:!1,sumShow:!1,searchObj:{},isShow:"true"==sessionStorage.deposit_onlines_export,exportForm:{}}),components:{tablegrid:o.a,quickDate:l.a,formEdit:i.a,confirm:r.a},methods:{init(){this.columnsUrl="static/json/cash/onLineReceipts/columns.json",this.baseUrl=URL.api+ROUTES.GET.cash.onlines,this.searchObj.date_from=sessionStorage.dateTimeStart,this.searchObj.date_to=sessionStorage.dateTimeEnd,"{}"==JSON.stringify(this.$route.query)&&(this.tableUrl=URL.api+ROUTES.GET.cash.onlines+"?date_from="+sessionStorage.dateTimeStart+"&date_to="+sessionStorage.dateTimeEnd);let e=URL.api+ROUTES.GET.user.level.list;this.dialogUrl=URL.api+ROUTES.GET.cash.online;let t=this;t.exportForm={date_from:sessionStorage.dateTimeStart,date_to:sessionStorage.dateTimeEnd,signature:1},this.$.autoAjax("get",e,"",{ok:e=>{let a=e.data;for(let e in a)t.searchConfig[10].Arr.push({label:"VIP"+a[e].level,value:a[e].level}),t.searchConfig[10].list.push("VIP"+a[e].level)},p:()=>{},error:e=>{console.log(e)}})},doQuery(e){let t={};for(let a in e.item)if("levels"===a){let s=e.item[a]||[],l=this.searchConfig[10].Arr||[],o=[];for(let e=0;e<s.length;e++)for(let t=0;t<l.length;t++)s[e]===l[t].label&&o.push(l[t].value);t[a]=o.toString()}else t[a]=e.item[a];t.money_to>0&&(t.money_from=100*t.money_from,t.money_to=100*t.money_to);for(let e in t)this.searchObj[e]=t[e];this.tableUrl=this.baseUrl+this.addSearch(t),this.exportForm=t,this.exportForm.signature=1},doHandle(e){switch(this.formType="",this.updated=!1,e.fn){case"doSupplement":this.doSupplement(e.row);break;case"openUserInformation":this.openUserInformation(e.row)}},doDetail(e){this.editVisible=!0,this.dialogVisible=!0;let t=e.id;this.$.autoAjax("get",this.dialogUrl+"/"+t,"",{ok:t=>{switch(this.dialogText=t.data,e.status){case"paid":this.dialogText.status="已支付";break;case"pending":this.dialogText.status="待支付";break;case"failed":this.dialogText.status="支付失败"}},p:()=>{},error:e=>{console.log(e)}}),this.loading=!1},doSupplement(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定补单"]||"确定补单")+'"'+e.user_name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="supplement",this.confirmConfig.obj=e)},doConfirm(e){this.loading=!0;let t=this;e.obj.id;switch(e.fn){case"supplement":this.$.autoAjax("patch",URL.api+ROUTES.PATCH.cash.deposit+`/${e.obj.trade_no}`,{uid:e.obj.user_id},{ok:e=>{0==e.state&&e.data?(t.formType="supplement",t.$message.success(t.LANG["补单成功！"]||"补单成功！")):t.$message.error(t.LANG["补单失败，请稍后重试！"]||"补单失败，请稍后重试！"),t.loading=!1},p:()=>{},error:e=>{console.log(e),t.loading=!1}})}},resetForm(){this.tableUrl=this.baseUrl+"?date_from="+sessionStorage.sysTime+" 00:00:00&date_to="+sessionStorage.sysTime+" 23:59:59"},openUserInformation(e){this.$router.push({path:"/memberManagement",query:{name:e.user_name}})},getTableData(e){if(this.sumShow=!1,this.allData={},e.allData&&e.allData.attributes&&e.allData.attributes.total>0){let t=e.allData.attributes;this.sumShow=!0;for(let e in t)this.allData[e]=t[e]}},exportData(){let e=this.$children[0].$refs.editForm.model;e.date_from&&e.date_to?this.$.autoAjax("get",URL.api+ROUTES.GET.cash.onlines,this.exportForm,{ok:e=>{0===e.state&&e.data&&(window.location.href=e.data.url)},error:e=>{this.$message.error(e.responseText.msg)}}):this.$message.error(LANG["必需选择时间才能导出"]||"必需选择时间才能导出")}},filters:{getChannel:function(e){let t;if(e)return(t=JSON.parse(e)).pay||""}},computed:{},mounted(){},created(){this.init()},activated(){if(this.searchConfig[1].value="",this.searchConfig[5].value="",this.searchConfig[6].prop[0].value="",this.searchConfig[6].prop[1].value="",this.formType="update"+(9*Math.random()+1),this.$route.query.app_id&&(this.searchConfig[5].value=this.$route.query.app_id,this.$route.query.app_id_time?(this.searchConfig[6].prop[0].value=this.searchConfig[6].prop[1].value=this.$route.query.app_id_time,this.tableUrl=URL.api+ROUTES.GET.cash.onlines+"?app_id="+this.$route.query.app_id+"&start_time="+this.$route.query.app_id_time+"&end_time="+this.$route.query.app_id_time):this.tableUrl=URL.api+ROUTES.GET.cash.onlines+"?app_id="+this.$route.query.app_id),this.$route.query.user_name&&(this.searchConfig[1].value=this.$route.query.user_name,this.tableUrl=URL.api+ROUTES.GET.cash.onlines+"?user_name="+this.$route.query.user_name),this.$route.query.day_begin){let e={};e={user_name:this.$route.query.member_name,start_time:this.$route.query.day_begin,end_time:this.$route.query.day_end},this.searchConfig[1].value=this.$route.query.member_name||"",this.tableUrl=URL.api+ROUTES.GET.cash.onlines+this.addSearch(e),setTimeout(()=>{this.updateKeys="date_from,"+this.$route.query.day_begin+",date_to,"+this.$route.query.day_end},1e3)}},deactivated(){this.$route.query.app_id=null,this.$route.query.app_id_time=null,this.$route.query.user_name=null}},p=a(24);var _=function(e){a(509)},u=Object(p.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page clearfix",attrs:{id:"onLineReceipts"}},[a("formEdit",{attrs:{formVisible:e.formVisible,formConfig:e.searchConfig,updateKeys:e.updateKeys,type:e.type,labelWidth:e.labelWidth,isEdit:e.isEdit,formType:e.formType,showAdd:!1},on:{"do-query":e.doQuery,"reset-form":e.resetForm}}),e._v(" "),a("el-col",[a("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableUrl:e.tableUrl,updated:e.updated,getData:!0,autoshowRefresh:!0,tableCheck:!1,pageSet:!0,showExport:e.isShow,tableIndex:!1,automation:!0},on:{"get-table-data":e.getTableData,"export-data":e.exportData,"do-handle":e.doHandle}},[e.sumShow?a("tr",{staticClass:"sumdiv ml20",attrs:{slot:"other",span:12},slot:"other"},[a("td",{attrs:{colspan:"15"}},[a("div",{staticClass:"cell"},[a("span",{staticClass:"font16 "},[e._v(e._s(e.LANG["金额小计"]||"金额小计")+" ")]),e._v(":"),a("span",[e._v(" "+e._s(e._f("formatMoney")(e.allData.page_amount_sum)))]),e._v(" "),a("span",{staticClass:"font16 ml10"},[e._v(e._s(e.LANG["优惠小计"]||"优惠小计")+" ")]),e._v(":"),a("span",[e._v(" "+e._s(e._f("formatMoney")(e.allData.page_coupon_sum)))]),e._v(" "),a("span",{staticClass:"font16 ml10"},[e._v(e._s(e.LANG["金额总计"]||"金额总计")+" ")]),e._v(":"),a("span",[e._v(" "+e._s(e._f("formatMoney")(e.allData.total_amount_sum)))]),e._v(" "),a("span",{staticClass:"font16 ml10"},[e._v(e._s(e.LANG["优惠总计"]||"优惠总计")+" ")]),e._v(":"),a("span",[e._v(" "+e._s(e._f("formatMoney")(e.allData.total_coupon_sum)))]),e._v(" "),a("span",{staticClass:"font16 ml10"},[e._v(e._s(e.LANG["笔数"]||"笔数")+" ")]),e._v(":"),a("span",[e._v(e._s(e.allData.total))])])])]):e._e()])],1),e._v(" "),a("el-col",[a("el-dialog",{staticClass:"details",attrs:{title:"详情",size:"small"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("el-col",{staticClass:"xsDetails",attrs:{span:24}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{staticClass:"dialogList",attrs:{span:24}},[a("div",[a("h3",[e._v("入款详情:")]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("交易订单号:"),a("span",[e._v(e._s(e.dialogText.trade_no))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("是否首存："),a("span",[e._v(e._s(e._f("isNew")(e.dialogText.is_new)))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("用户名： "),a("span",[e._v(e._s(e.dialogText.user_name))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("会员等级："),a("span",[e._v(e._s(e.dialogText.level))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("真实姓名："),a("span",[e._v(e._s(e.dialogText.true_name))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("用户注册时间："),a("span",[e._v(e._s(e.dialogText.register_time))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("上级代理："),a("span",[e._v(e._s(e.dialogText.agent_name))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("\n                                已入款次数/金额："),a("span",[e._v(e._s(e.dialogText.total_deposit_times)+"/"+e._s(e.dialogText.total_deposit_money/100))])])],1)]),e._v(" "),a("el-col",{staticClass:"dialogList mt10",attrs:{span:24}},[a("div",[a("h3",[e._v("支付渠道:")]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("存款金额："),a("span",[e._v(e._s(e.dialogText.money/100))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("支付接口名称："),a("span",[e._v(e._s(e.dialogText.pay_no))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("支付渠道： "),a("span",[e._v(e._s(e._f("getChannel")(e.dialogText.channel_name)))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("外部交易号："),a("span",[e._v(e._s(e.dialogText.trade_no))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("存款IP与地区："),a("span",[e._v(e._s(e.dialogText.ip))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("存款日期："),a("span",[e._v(e._s(e.dialogText.recharge_time))])])],1)]),e._v(" "),a("el-col",{staticClass:"dialogList mt10",attrs:{span:24}},[a("div",[a("h3",[e._v("优惠:")]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("优惠金额："),a("span",[e._v(e._s(e.dialogText.coupon_money/100))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("取款要求："),a("span",[e._v(e._s(e.dialogText.withdraw_bet/100))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("优惠活动名称： "),a("span",[e._v(e._s(e.dialogText.active_name))])])],1)]),e._v(" "),a("el-col",{staticClass:"dialogList mt10",attrs:{span:24}},[a("div",[a("label",[e._v("备注:")]),e._v(" "),a("el-input",{attrs:{placeholder:"当前无备注内容",disabled:!0},model:{value:e.dialogText.memo,callback:function(t){e.$set(e.dialogText,"memo",t)},expression:"dialogText.memo"}}),e._v(" "),a("el-col",{attrs:{span:24}},[e._v("状态:"),a("span",[e._v(e._s(e.dialogText.status))])])],1)]),e._v(" "),a("el-col",{staticClass:"tCent el-dialog__footer",staticStyle:{margin:"20px 0",padding:"0","border-top":"0"},attrs:{span:24}},[a("div",[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)])],1)],1)],1)],1),e._v(" "),a("el-col",[a("confirm",{attrs:{confirmConfig:e.confirmConfig},on:{"do-confirm":e.doConfirm}})],1),e._v(" "),a("el-col",[a("el-dialog",{attrs:{title:"提示",visible:e.onDialogVisible,size:"tiny"},on:{"update:visible":function(t){e.onDialogVisible=t}}},[e._v("\n            "+e._s(e.LANG["点击”确认“导出数据"]||"点击”确认“导出数据")+"\n            "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.onDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("a",{attrs:{href:e.outUrl,target:"_blank",id:"outUrl"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onDialogVisible=!1}}},[e._v("确 认")])],1)],1)])],1)],1)},[],!1,_,"data-v-531eae1e",null);t.default=u.exports},509:function(e,t,a){}}]);