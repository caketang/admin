(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{188:function(e,t,a){"use strict";a.r(t);var i=a(202),s=a(203),o=a(206),r={data:()=>({LANG:LANG,agentName:"",examineState:"",examineStateList:[{label:"待审核",value:0},{label:"已审核",value:1},{label:"已拒绝",value:2}],columnsUrl:"",tableUrl:"",baseUrl:"",updated:"",searchType:"search",searchEdit:{},searchConfig:[{prop:"name",value:"",type:"text",label:"代理名称"},{prop:"status",value:"",label:"状态",type:"select",list:[{label:"未审核",value:"0"},{label:"已拒绝",value:"2"}]}],formType:"",formTitel:"",labelWidth:"90px",editVisible:{state:!1},loading:!1,nowId:-1,confirmConfig:{state:!1,msg:"",fn:""}}),components:{tablegrid:i.a,formEdit:s.a,confirm:o.a},methods:{init(){this.columnsUrl="static/json/accoutManage/agentAudit/columns.json",this.tableUrl=URL.api+ROUTES.GET.user.agent.reviews+"?n_status=1",this.baseUrl=URL.api+ROUTES.GET.user.agent.reviews},doQuery(e){this.tableUrl=this.baseUrl+this.addSearch(e.item)},doHandle(e){switch(this.nowId=parseInt(e.row.id),e.fn){case"doReject":this.doReject(e.row);break;case"doAudit":this.doAudit(e.row);break;case"doDetial":this.doDetial(e.row)}},doReject(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定拒绝"]||"确定拒绝")+'"'+e.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="reject")},doAudit(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定审核"]||"确定审核")+'"'+e.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="audit")},doConfirm(e){this.loading=!0,this.updated=!1;let t=this;switch(e.fn){case"reject":this.$.autoAjax("patch",URL.api+"/user/agent/handle/"+parseInt(this.nowId),{status:"2"},{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，代理拒绝成功！"]||"恭喜您，代理拒绝成功！"),t.updated=!0):t.$message.error(LANG["代理拒绝失败，请稍候重试！"]||"代理拒绝失败，请稍候重试！"),t.loading=!1},p:()=>{},error:e=>{console.log(e)}});break;case"audit":this.$.autoAjax("patch",URL.api+"/user/agent/handle/"+parseInt(this.nowId),"",{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，代理审核通过！"]||"恭喜您，代理审核通过！"),t.updated=!0):t.$message.error(LANG["代理审核失败，请稍候重试！"]||"代理审核失败，请稍候重试！"),t.loading=!1},p:()=>{},error:e=>{console.log(e)}})}},doDetial(e){this.$router.push({path:"/agentAccount",query:{id:e.id,type:e.type}})},resetForm(){this.tableUrl=this.baseUrl}},computed:{},mounted(){},created(){this.init()}},n=a(10);var l=function(e){a(492)},d=Object(n.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page clearfix",attrs:{id:"agentAudit"}},[a("formEdit",{attrs:{formVisible:e.editVisible,formConfig:e.searchConfig,type:e.searchType,isEdit:e.searchEdit,labelWidth:e.labelWidth,showAdd:!1},on:{"do-query":e.doQuery,"reset-form":e.resetForm}}),e._v(" "),a("el-col",[a("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableIndex:!1,updated:e.updated,tableUrl:e.tableUrl},on:{"do-handle":e.doHandle}})],1),e._v(" "),a("el-col",[a("confirm",{attrs:{confirmConfig:e.confirmConfig},on:{"do-confirm":e.doConfirm}})],1)],1)},[],!1,l,null,null);t.default=d.exports},492:function(e,t,a){}}]);