webpackJsonp([91],{1071:function(t,a,e){e(912);var i=e(60)(e(537),e(1137),"data-v-29c50957",null);t.exports=i.exports},1116:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"clearfix",attrs:{id:"subAgentRebate"}},[e("div",{staticClass:"title"},[e("a",{attrs:{href:"javascript:;"},on:{click:t.goback}},[e("el-button",{attrs:{type:"primary",icon:"arrow-left",size:"small"}},[t._v(t._s(t.LANG["返 回"]||"返 回"))])],1)]),t._v(" "),e("span",[e("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t.query.name))]),t._v("\n        返水活动详情\n    ")],1),t._v(" "),e("el-col",[e("tableDetail",{attrs:{columnsUrl:t.columnsUrl,tableUrl:t.tableUrl,tableCheck:!0,tableIndex:!1,sumGame:!0,assembleColumns:t.assembleColumns,isLoading:t.isLoading,updated:t.updated,showExport:t.isShow,colspan:3},on:{"do-operation":t.doOperation,"export-data":t.exportData}})],1),t._v(" "),e("el-col",[e("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,size:"tiny"},on:{"update:visible":function(a){t.dialogVisible=a}}},[t._v("\n            "+t._s(t.LANG["点击”确认“导出数据"]||"点击”确认“导出数据")+"\n            "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),e("a",{attrs:{href:t.outUrl,target:"_blank",id:"outUrl"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("确 认")])],1)],1)])],1)],1)},staticRenderFns:[]}},1137:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tableSingle",attrs:{id:"tableSingle"}},[t.showExport?e("el-col",{staticClass:"tRight mb20"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.exportData}},[t._v(t._s(t.LANG["导出"]||"导出")+" ")])],1):t._e(),t._v(" "),e("el-col",{staticClass:"ft14 mb10"},[t.allCheckSum?e("div",{staticClass:"font14 mt10 fl w50"},[e("span",{staticClass:"fl mr10",staticStyle:{"line-height":"36px"}},[t._v(t._s(t.LANG["本页您选择了"]||"本页您选择了")+"\n            "),e("span",{staticClass:"selecttext"},[t._v(t._s(t.checkSum))]),t._v(t._s(t.LANG["条数据"]||"条数据")+" ")]),t._v(" "),e("el-button",{attrs:{size:"small",loading:t.loadingOne},on:{click:function(a){t.doOperation("delMeg")}}},[t._v(t._s(t.LANG["冲销"]||"冲销"))])],1):t._e()]),t._v(" "),e("div",{staticClass:"tablesOverall",attrs:{id:"tables"}},[e("table",{staticClass:"el-table w100 el-table--border mt10",attrs:{cellspacing:"0",cellpadding:"0",border:"1"}},[e("tr",[t.tableCheck&&t.tableDataList.length?e("th",[e("div",{staticClass:"cell"},[e("el-checkbox",{attrs:{disabled:t.checkDisabled},on:{change:t.allchecked},model:{value:t.allChecked,callback:function(a){t.allChecked=a},expression:"allChecked"}})],1)]):t._e(),t._v(" "),t.tableIndex&&t.tableDataList.length?e("th",[e("div",{staticClass:"cell"},[t._v(t._s(t.LANG["序号"]||"序号"))])]):t._e(),t._v(" "),t._l(t.columnList,function(a,i){return 1==a.disabled?e("th",{key:i,staticClass:"is-leaf"},[a.click?e("div",t._l(a.btnGroup,function(a,i){return e("el-button",{key:i,class:t.colorIndex===i?"clickState":"",staticStyle:{display:"block"},attrs:{size:"small",type:"text"},on:{click:function(e){t.doSort(a.fn,i)}}},[t._v(t._s(a.label))])})):e("div",[t._v(t._s(a.label))])]):t._e()})],2),t._v(" "),t._l(t.tableDataList,function(a,i){return t.tableDataList.length?e("tr",{key:i,class:{col2:!parseInt((i+1)%2)}},[t.tableCheck&&t.tableDataList.length?e("td",{staticClass:"el-table_1_column_19",attrs:{width:"55px"}},[e("div",{staticClass:"cell"},[e("el-checkbox",{attrs:{disabled:"0"!=a.revoked},on:{change:function(a){t.thisChecked(i)}},model:{value:t.checkList[i],callback:function(a){t.$set(t.checkList,i,a)},expression:"checkList[k]"}})],1)]):t._e(),t._v(" "),t.tableIndex&&t.tableDataList.length?e("td",{staticClass:"el-table_ 1_column_19"},[e("div",{staticClass:"cell tCent"},[t._v(t._s(parseInt(i)+1))])]):t._e(),t._v(" "),t._l(t.columnList,function(i,s){return 1==i.disabled?e("td",{key:s,staticClass:"el-table_1_column_19",style:{"min-Width":i.width+"px"}},["twoLine"==i.type?e("div",{staticClass:"cell",class:{tCent:void 0!=i.class}},[i.filterByWord?e("div",t._l(a[i.filterByWord],function(a){return e("div",[i.filterCondition.split(",").length>1?e("div",[i[i.filterCondition.split(",")[0]]==a[i.filterCondition.split(",")[0]]&&i[i.filterCondition.split(",")[1]]==a[i.filterCondition.split(",")[1]]?e("div",[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(a.valid_bet)))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(a.coupon)))])]):t._e()]):e("div",[i[i.filterCondition.split(",")[0]]==a[i.filterCondition.split(",")[0]]?e("span",[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(a.valid_bet)))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(a.coupon)))])]):t._e()])])})):e("div",[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(a[i.prop.split(",")[0]])))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(a[i.prop.split(",")[1]])))])])]):t._e(),t._v(" "),i.type||i.filters?t._e():e("div",{staticClass:"cell",class:{tCent:void 0!=i.class}},[e("span",[t._v(t._s(a[i.prop]))])]),t._v(" "),i.filters?e("div",{staticClass:"cell",class:{tCent:void 0!=i.class}},["1"==a[i.prop]?e("span",{staticClass:"danger_text"},[t._v(t._s(t._f("formatSex")(a[i.prop],i.filters)))]):e("span",{staticClass:"sucess_text"},[t._v(t._s(t._f("formatSex")(a[i.prop],i.filters)))])]):t._e()]):t._e()})],2):t._e()}),t._v(" "),t.sumGame&&t.allTableDataList.subTotalData&&t.allTableDataList.size?e("tr",[e("td",[e("div",{staticClass:"cell"},[t._v(t._s(t.LANG["小计"]||"小计"))])]),t._v(" "),e("td",{attrs:{colspan:t.colspan}},[e("div",{staticClass:"cell tCent",attrs:{slot:"sub"},slot:"sub"},[t._v("人数 / 冲销: "+t._s(t.attributes.subTotal)+"  / "+t._s(t.attributes.subTotalRevoke))])]),t._v(" "),e("td",[e("span",{staticClass:"cell",staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(t.allTableDataList.subTotalMoney.valid_bet)))]),t._v(" "),e("span",{staticClass:"cell",staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(t.allTableDataList.subTotalMoney.coupon)))])]),t._v(" "),t._l(t.bottomColumnList,function(a,i){return e("td",{key:i},t._l(t.allTableDataList.subTotalData,function(i,s){return a.filterCondition&&a[a.filterCondition.split(",")[0]]==i[a.filterCondition.split(",")[0]]&&a[a.filterCondition.split(",")[1]]==i[a.filterCondition.split(",")[1]]?e("div",{key:s,staticClass:"cell"},[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(i.valid_bet)))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(i.coupon)))])]):t._e()}))})],2):t._e(),t._v(" "),t.sumGame&&t.allTableDataList.totalMoney&&t.allTableDataList.size?e("tr",[e("td",[e("div",{staticClass:"cell"},[t._v(t._s(t.LANG["总计"]||"总计"))])]),t._v(" "),e("td",{attrs:{colspan:t.colspan}},[e("div",{staticClass:"cell tCent",attrs:{slot:"total"},slot:"total"},[t._v("总人数 / 冲销 : "+t._s(t.attributes.total)+" / "+t._s(t.attributes.totalRevoke))])]),t._v(" "),e("td",[e("span",{staticClass:"cell",staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(t.allTableDataList.totalMoney.valid_bet)))]),t._v(" "),e("span",{staticClass:"cell",staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(t.allTableDataList.totalMoney.coupon)))])]),t._v(" "),t._l(t.bottomColumnList,function(a,i){return e("td",{key:i},t._l(t.allTableDataList.totalData,function(i,s){return a.filterCondition&&a[a.filterCondition.split(",")[0]]==i[a.filterCondition.split(",")[0]]&&a[a.filterCondition.split(",")[1]]==i[a.filterCondition.split(",")[1]]?e("div",{key:s,staticClass:"cell"},[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(i.valid_bet)))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(i.coupon)))])]):t._e()}))})],2):t._e()],2),t._v(" "),0==t.tableDataList.length?e("el-col",{staticStyle:{"line-height":"100px","text-align":"center","background-color":"#ffffff"}},[e("div",{staticClass:"dell"},[t._v(t._s(t.LANG["暂无数据"]||"暂无数据"))])]):t._e()],1),t._v(" "),t.pageSet&&t.tableDataList.length>0?e("el-col",{staticClass:"toolbar mt20 pRight20",staticStyle:{position:"relative","text-align":"right"},attrs:{span:24}},[e("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100,1e3],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.doSizePage,"current-change":t.doCurrentChange}})],1):t._e()],1)},staticRenderFns:[]}},283:function(t,a,e){e(893);var i=e(60)(e(615),e(1116),"data-v-11df81b3",null);t.exports=i.exports},354:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{columnsModel:[],setState:!1}},props:{columns:Array,columnConfig:Array},methods:{changeColumnConfig:function(){this.$emit("do_change-col",{event:event,item:this.columnConfig})},saveSet:function(){this.setState=!1},changeSet:function(){this.setState=!0}},mounted:function(){var t=this.columns;for(var a in t)this.columnsModel.push({id:a,label:t[a],prop:t[a]})}}},358:function(t,a,e){var i=e(60)(e(354),e(359),null,null);t.exports=i.exports},359:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.setState?t._e():e("i",{staticClass:"fa fa-cog",attrs:{"aria-hidden":"true"},on:{click:t.changeSet}}),t._v(" "),t.setState?e("el-select",{staticStyle:{width:"700px"},attrs:{multiple:"",placeholder:t._("表格列配置")},on:{change:t.changeColumnConfig},model:{value:t.columnConfig,callback:function(a){t.columnConfig=a},expression:"columnConfig"}},t._l(t.columnsModel,function(t){return e("el-option",{key:t.id,attrs:{label:t.label,value:t.prop}})})):t._e(),t._v(" "),t.setState?e("el-button",{attrs:{type:"success"},domProps:{textContent:t._s(t._("保存配置"))},on:{click:t.saveSet}}):t._e()],1)},staticRenderFns:[]}},537:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var s,l=e(113),o=i(l),n=e(358),r=(i(n),e(4));i(r);a.default={data:function(){return{LANG:LANG,columnConfig:[],columnList:[],bottomColumnList:[],tableDataList:[],allTableDataList:{},gridData:[],subTotalBet:{},totalBetArray:[],totalBet:{},total:0,pageSize:1e3,pageCount:1,currentPage:1,otherData:null,sumArr:[],baseUrl:"",sumNumber:0,allChecked:!1,checkList:[],rowsList:{},checkSum:0,allCheckSum:0,loading:!1,tableScroll:!1,colorIndex:null,checkDisabled:!1,modeData:{name:"",withdraw_per:""},sLoading:!1,checked:{},attributes:{subTotal:0,total:0},timeXJ:0,timeTZ:0,loadingOne:!1}},props:{tableData:Object,tableUrl:String,columns:Array,columnsUrl:String,assembleColumns:Object,tableCheck:{type:Boolean,default:!1},tableIndex:{type:Boolean,default:!1},allCheck:{type:Boolean,default:!1},tableBorder:{type:Boolean,default:!0},tableRowDbclick:{type:Boolean,default:!0},pageSet:{type:Boolean,default:!0},sumGame:{type:Boolean,default:!1},colspan:{type:Number,default:1},sumKey:"",updateDate:Object,updated:{type:Boolean,default:!1},formType:String,query:Object,opts:String,getData:{type:Boolean,default:!1},saveData:{type:Boolean,default:!1},updateMessage:{type:String,default:""},autoWidth:{type:Boolean,default:!1},lotteryType:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!0},showExport:{type:Boolean,default:!1},showAdd:{type:Boolean,default:!1},showDetail:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},components:{},methods:(s={Datainit:function(){var t=this;this.loading=!0;var a=this;this.allChecked=!1,this.checkList=[],this.rowsList={},this.checkSum=0,this.unchecked={},this.modeData.withdraw_per="",this.modeData.name="";var e=(this.total,this.pageSize),i=(this.pageCount,this.currentPage),s=this.otherData={};this.sumKey;this.$refs.form&&this.$refs.form.resetFields(),this.attributes.subTotal=0,this.attributes.total=0,a.tableDataList.splice(0,a.tableDataList.length),a.columnList.splice(0,a.columnList.length);var l=a.columnList||[];if(this.baseUrl=this.tableUrl,""!=this.baseUrl&&void 0!=this.baseUrl){if(this.query&&this.query.toString().length>0&&this.query,this.pageSet){if(-1===this.baseUrl.indexOf("?"))this.baseUrl=this.baseUrl+"?page="+(0===i?1:i)+"&page_size="+(0===e?1e3:e);else{var o=this.baseUrl.indexOf("page=");i=1,this.baseUrl=o>0?this.baseUrl.replace(/page=\d+/,"page="+i||1):this.baseUrl+"&page="+(0===i?1:i)+"&page_size="+(0===e?1e3:e);var n=this.baseUrl.indexOf("page_size=");this.baseUrl=n>0?this.baseUrl.replace(/page_size=\d+/,"page_size="+(0===e?1e3:e)):this.baseUrl+"&page_size=1000"}}this.$http.get(this.baseUrl,URLCONFIG).then(function(e){a.tableDataList=[];var i=e&&e.data&&e.data.data?e.data.data:[];if(a.getData){var l=e.data||{};for(var o in l)s[o]=l[o]}var n=e&&e.data&&e.data.data&&e.data.data.list||[];if(a.subTotalBet={},a.totalBet={},e.data.attributes?(t.attributes.subTotal=e.data.data.length||0,t.attributes.total=e.data.attributes.total||0,t.attributes.totalRevoke=e.data.attributes.totalRevoke||0,t.attributes.subTotalRevoke=e.data.attributes.subTotalRevoke||0,e.data.attributes&&e.data.attributes.totalData&&(a.allTableDataList.totalData=e.data.attributes.totalData,a.allTableDataList.totalMoney=e.data.attributes.totalMoney),e.data.attributes&&e.data.attributes.subTotalData&&(a.allTableDataList.subTotalData=e.data.attributes.subTotalData,a.allTableDataList.subTotalMoney=e.data.attributes.subTotalMoney),a.allTableDataList.size=i.length,a.total=e&&e.data&&e.data.attributes&&e.data.attributes.total||10,a.pageSize=e&&e.data&&e.data.attributes&&e.data.attributes.size||1e3,a.pageCount=Math.ceil(a.total/a.pageSize)?Math.ceil(a.total/a.pageSize):1,a.currentPage=parseInt(e.data.attributes.number)?parseInt(e.data.attributes.number):1):a.allTableDataList={},n.length&&n.length>0){for(var r in n)a.tableDataList.push(n[r]);a.initCheckList(n)}else if(i.length&&i.length>0){a.sumNumber;for(var c in i)a.tableDataList.push(i[c]);t.initCheckList(i)}a.getData&&a.$emit("get-table-data",{event:event,item:a.tableDataList,allData:a.otherData}),a.loading=!1}).catch(function(t){a.loading=!1})}else{if(this.loading=!1,!this.tableData)return;this.query&&this.query.toString().length>0&&this.query;var r=this.tableData,c=a.otherData[0]={},d=this.tableData.list||[];if(d.length&&d.length>0){for(var u in r)c[u]=r[u];a.total=r.total?r.total:0,a.pageSize=r.page_size?r.page_size:1e3,a.pageCount=Math.ceil(a.total/a.pageSize)?Math.ceil(a.total/a.pageSize):1,a.currentPage=r.page?r.page:1;for(var h in d)a.tableDataList.push(d[h]);a.initCheckList(d)}a.getData&&a.$emit("get-table-data",{event:event,item:a.tableDataList,otherData:a.otherData})}""!=this.columnsUrl&&void 0!=this.columnsUrl&&this.$http.get(this.columnsUrl,URLCONFIG).then(function(e){l.splice(0,l.length);var i=e&&e.data&&e.data.columns?e.data.columns:[];if(t.assembleColumns){var s=t.assembleColumns.index,o=i.slice(0,s),n=i.slice(s,i.length),r={orignCol:o,endCol:n,connectCol:t.assembleColumns.data};i=CONNECTCOLUMS(r,100),t.bottomColumnList=i.slice(s,i.length)}if(i.length>0)for(var c in i)l.push(i[c]),1==i[c].disabled&&a.columnConfig.push(i[c].prop)}).catch(function(t){a.loading=!1,a.$message.error(LANG["网络问题，请稍后重试！"]||"网络问题，请稍后重试！")})},doHandle:function(t,a){this.$emit("do-handle",{event:event,row:t,fn:a,page:this.currentPage})},initCheckList:function(t){var a=this.rowsList={},e=this.checked;this.checkSum=0,this.allChecked=!0;var i=0;for(var s in t)e[t[s].detail_id]?(this.$set(this.checkList,s,!0),i++):this.$set(this.checkList,s,!1),a[s]=t[s];i===t.length&&i>0?this.allChecked=!0:this.allChecked=!1,this.checkSum=i},allchecked:function(){var t=this.allChecked,a=(this.unchecked,this.tableDataList,this.checkList),e=(this.checkCondition,this.checked),i=this.rowsList,s=[],l=0;if(t)for(var o in this.tableDataList)"0"==this.tableDataList[o].revoked&&(s.push(this.tableDataList[o]),i[o]=this.tableDataList[o],e[this.tableDataList[o].detail_id]=this.tableDataList[o].detail_id,a[o]=!0,this.allCheckSum++,l++);else{this.checkSum=0,s.splice(0,s.length);for(var n in a)a[n]=!1;for(var r in i)e[i[r].detail_id]&&(this.allCheckSum--,delete e[i[r].detail_id]);e={},i=null}this.attributes.subTotalRevoke===this.tableDataList.length&&this.$message.error(LANG["本页无会员可冲销"]||"本页无会员可冲销"),this.allChecked=this.tableDataList.length===l,this.checkSum=this.tableDataList.length===l?this.tableDataList.length:l},thisChecked:function(t){var a=(this.allChecked,this.checked),e=this.tableDataList,i=this.checkList,s=this.rowsList,l=[],o=0;i[t]?(s[t]=this.tableDataList[t],a[s[t].detail_id]=s[t].detail_id,o++,this.checkSum=this.checkSum+1):(a[s[t].detail_id]&&(delete a[this.tableDataList[t].detail_id],o--),s[t]&&delete s[t],this.checkSum=this.checkSum-1),this.checkSum===e.length&&(this.allChecked=!0),0===this.checkSum&&(this.allChecked=!1);for(var n in s)l.push(s[n]);this.allCheckSum=o},doSizePage:function(t){var a=this;this.loading=!0;var e=this,i=this.total,s=this.pageSize,l=this.pageCount,o={};if(Math.ceil(s*l/i)||1,e.tableDataList.splice(0,e.tableDataList.length),-1===this.baseUrl.indexOf("?"))this.baseUrl=this.baseUrl+"?page=1&page_size="+t;else{var n=this.baseUrl.indexOf("page=");this.baseUrl=n>0?this.baseUrl.replace(/page=\d+/,"page=1"):this.baseUrl+"&page=1&page_size="+t;var r=this.baseUrl.indexOf("page_size=");this.baseUrl=r>0?this.baseUrl.replace(/page_size=\d+/,"page_size="+t):this.baseUrl+"&page_size=1000"}this.$http.get(this.baseUrl,URLCONFIG).then(function(t){e.total=t.data.attributes.total||10,e.pageSize=t.data.attributes.size||1e3,e.pageCount=Math.ceil(a.total/a.pageSize),e.currentPage=1;var i=t.data.tableDemoDate||t.data.data||t.data.data.list||t.data.data.data||t.data.data.deposit||[];if(i.list){for(var s in i.list)e.tableDataList.push(i.list[s]);e.initCheckList(i.list)}else{for(var l in i)e.tableDataList.push(i[l]);e.initCheckList(i)}if(e.getData){var n=t.data||{};for(var r in n)o[r]=n[r]}e.allTableDataList={},t.data.attributes&&(e.attributes.subTotal=t.data.data.length||0,e.attributes.total=t.data.attributes.total||0,e.attributes.totalRevoke=t.data.attributes.totalRevoke||0,e.attributes.subTotalRevoke=t.data.attributes.subTotalRevoke||0,t.data.attributes&&t.data.attributes.totalData&&(e.allTableDataList.totalData=t.data.attributes.totalData,e.allTableDataList.totalMoney=t.data.attributes.totalMoney),t.data.attributes&&t.data.attributes.subTotalData&&(e.allTableDataList.subTotalData=t.data.attributes.subTotalData,e.allTableDataList.subTotalMoney=t.data.attributes.subTotalMoney)),e.allTableDataList.size=i.length,e.getData&&e.$emit("get-table-data",{event:event,item:e.tableDataList,allData:o}),e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(LANG["网络问题，请稍后重试！"]||"网络问题，请稍后重试！")})},doCurrentChange:function(t){var a=this;this.loading=!0;var e=this.total,i=this.pageSize,s=this.pageCount,l={};this.currentPage=t;var o=this;if(Math.ceil(i*s/e)||1,o.tableDataList.splice(0,o.tableDataList.length),-1===this.baseUrl.indexOf("?"))this.baseUrl=this.baseUrl+"?page="+t+"&page_size="+this.pageSize;else{var n=this.baseUrl.indexOf("page=");this.baseUrl=n>0?this.baseUrl.replace(/page=\d+/,"page="+t):this.baseUrl+"&page="+t+"&page_size="+this.pageSize;var r=this.baseUrl.indexOf("page_size=");this.baseUrl=r>0?this.baseUrl.replace(/page_size=\d+/,"page_size="+this.pageSize):this.baseUrl+"&page_size=1000"}this.$http.get(this.baseUrl,URLCONFIG).then(function(t){o.total=t.data.attributes.total||10,o.pageSize=t.data.attributes.size||1e3,o.pageCount=Math.ceil(a.total/a.pageSize),o.currentPage=t.data.attributes.number||1;var e=t.data.tableDemoDate||t.data.data||t.data.data.list||t.data.data.data||t.data.data.deposit||[];if(e.list){for(var i in e.list)o.tableDataList.push(e.list[i]);o.initCheckList(e.list)}else{for(var s in e)o.tableDataList.push(e[s]);o.initCheckList(e)}if(o.getData){var n=t.data||{};for(var r in n)l[r]=n[r]}o.allTableDataList={},t.data.attributes&&(o.attributes.subTotal=t.data.data.length||0,o.attributes.total=t.data.attributes.total||0,o.attributes.totalRevoke=t.data.attributes.totalRevoke||0,o.attributes.subTotalRevoke=t.data.attributes.subTotalRevoke||0,t.data.attributes&&t.data.attributes.totalData&&(o.allTableDataList.totalData=t.data.attributes.totalData,o.allTableDataList.totalMoney=t.data.attributes.totalMoney),t.data.attributes&&t.data.attributes.subTotalData&&(o.allTableDataList.subTotalData=t.data.attributes.subTotalData,o.allTableDataList.subTotalMoney=t.data.attributes.subTotalMoney)),a.attributes.subTotal=t.data.data.length||0,a.attributes.subTotalRevoke=t.data.attributes.subTotalRevoke||0,o.allTableDataList.size=e.length,o.getData&&o.$emit("get-table-data",{event:event,item:o.tableDataList,allData:l}),o.loading=!1}).catch(function(t){o.loading=!1,o.$message.error(LANG["网络问题，请稍后重试！"]||"网络问题，请稍后重试！")})},doOperation:function(t){var a=[];for(var e in this.checked)a.push(e);this.loadingOne=!0,this.$emit("do-operation",{dataList:a})},doSort:function(t,a){var e=this.tableDataList,i=this.timeXJ,s=this.timeTZ;switch(t){case"sortByXJ":i%2==0?e.sort(function(t,a){return t.coupon-a.coupon}):e.sort(function(t,a){return a.coupon-t.coupon}),this.timeXJ++;break;case"sortByTZ":s%2==0?e.sort(function(t,a){return t.valid_bet-a.valid_bet}):e.sort(function(t,a){return a.valid_bet-t.valid_bet}),this.timeTZ++}},updateFormData:function(){this.tableData.list.length>0&&this.Datainit()}},(0,o.default)(s,"doHandle",function(t,a){this.$emit("do-handle",{event:event,row:t,fn:a,page:this.currentPage})}),(0,o.default)(s,"changes",function(t,a,e){t>=0&&this.$emit("do-changes",{row:a,index:t,key:e})}),(0,o.default)(s,"dataSave",function(){this.$emit("data-save",{dataList:this.tableDataList})}),(0,o.default)(s,"getTableWidth",function(){if(this.fullWidth){var t=0;this.columnsUrl&&this.$http.get(this.columnsUrl,URLCONFIG).then(function(a){if(a.data.columns){var e=a.data.columns;for(var i in e)e[i].width&&(t+=parseInt(e[i].width));t=t>900?t:1100,$(window).width()>1200&&($(".tablesOverall").find("table").css("min-width",t+"px"),$(".tablesOverall").css("width",$(window).width()-110).addClass("socr"))}})}}),(0,o.default)(s,"exportData",function(){this.$emit("export-data")}),(0,o.default)(s,"save",function(){var t=this;this.$refs.form.validate(function(a){if(!a)return!1;var e=[];for(var i in t.unchecked)e.push(i);t.$emit("unchecked",{dataList:e,modeData:t.modeData})})}),s),watch:{"tableData.list":"updateFormData",tableUrl:function(t){this.Datainit()},tableDataList:function(){this.getTableWidth()},formType:function(t){"add"!=t&&"edit"!=t&&"delete"!=t||this.Datainit()},opts:function(t){t&&this.Datainit()}},created:function(){this.Datainit()},mounted:function(){this.$nextTick(function(){EVENT.$emit("table.loaded")})},activated:function(){this.allCheckSum=0,this.checked={},this.pageSize=1e3,this.loadingOne=!1;var t=this;setTimeout(function(){t.Datainit()},500)}}},615:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var s=e(61),l=i(s),o=e(114),n=i(o),r=e(1071),c=i(r);a.default={data:function(){return{LANG:LANG,columnsUrl:"",loading:!1,tableUrl:"",assembleColumns:{index:4,data:[]},checkCondition:{prop:"revoked",value:"1"},query:{},updated:!1,attributes:{},timeXJ:0,timeTZ:0,isLoading:!0,isShow:"true"==sessionStorage.rebate_details_export||"true"==sessionStorage.rebate_export,dialogVisible:!1,outUrl:""}},components:{tableDetail:c.default},methods:{init:function(){var t=this,a=this.$route.query;for(var e in a)this.$set(this.query,e,a[e]);(function(){return new n.default(function(a,e){0===t.assembleColumns.data.length?t.$http.get(URL.api+"/games",URLCONFIG).then(function(e){if(0===e.data.state&&e.data.data){e.data.data.forEach(function(a){var e={label:a.game_name,type:"twoLine",game_id:a.game_id,game_type:a.game_type,filterByWord:"games",prop:"val",filterCondition:"game_type,game_id"};t.assembleColumns.data.push(e)}),a()}}).catch(function(a){t.$message.error(LANG["未知错误，请稍后重试"]||"未知错误，请稍后重试"),e(a)}):a()})})().then(function(){t.columnsUrl="static/json/preAct/discountDetail/columns.json",t.tableUrl=URL.api+"/active/rebetset/detail?id="+t.$route.query.id})},goback:function(){this.$router.push({path:"/discount"})},getCheckedKeys:function(){this.checkkeys=this.$refs.tree.getCheckedKeys()},exportData:function(){var t=this,a=this;if("true"==sessionStorage.rebate_export||"true"==sessionStorage.rebate_details_export){var e=URL.api+"/export/download/active.rebetset/",i=this.$route.query.id;this.$http.get(URL.api+"/dev/download/sign?nonce="+e,URLCONFIG).then(function(s){s.data.data?(a.outUrl=e+"?id="+i+"&nonce="+s.data.data.nonce+"&signature="+s.data.data.signature+"&time="+s.data.data.time+"&uuid="+s.data.data.uuid,a.dialogVisible=!0):s.data.msg?t.$message.error(s.data.msg):a.$message.error(LANG["数据导出失败，请稍后重试"]||"数据导出失败，请稍后重试")}).catch(function(t){})}else this.$message.error(LANG["权限不足"]||"权限不足")},doHandle:function(t){switch(t.fn){case"doDetail":this.doDetail(t.row)}},doOperation:function(t){var a=this;if(this.updated=!1,t.dataList.length>0){var e=URL.api+"/active/rebetset/revoke",i={id:this.query.id||0,detail_id:t.dataList||[]};this.isLoading=!0,this.$http.put(e,(0,l.default)(i),URLCONFIG).then(function(t){if(t.data.data&&0==t.data.state){var e=LANG["冲销成功"]||"冲销成功";a.updated=!0,a.$message.success(e),a.isLoading=!1,a.$router.push({path:"/discount"})}else{var i=LANG["冲销失败，请稍后重试"]||"冲销失败，请稍后重试";a.updated=!0,a.$message.success(i)}}).catch(function(t){a.$message.error(LANG["未知错误，请稍后重试"]||"未知错误，请稍后重试")})}else{var s=LANG["请选择数据"]||"请选择数据";this.$message.error(s)}}},computed:{},mounted:function(){},activated:function(){this.init()}}},728:function(t,a,e){a=t.exports=e(220)(),a.push([t.i,".title[data-v-11df81b3]{margin-bottom:10px}",""])},747:function(t,a,e){a=t.exports=e(220)(),a.push([t.i,".clickState[data-v-29c50957]{color:blue}.col2[data-v-29c50957]{background-color:#fafafa}.el-table .cell[data-v-29c50957]{max-width:500px}.el-table .sucess_text[data-v-29c50957]{color:#13ce66}.el-table .info_text[data-v-29c50957]{color:#20a0ff}.el-table .danger_text[data-v-29c50957]{color:#ff4949}.fontWeight[data-v-29c50957]{font-weight:700}",""])},893:function(t,a,e){var i=e(728);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(221)("0a1f580e",i,!0)},912:function(t,a,e){var i=e(747);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(221)("50313c50",i,!0)}});